---
id: dod-fix-desires-type-check
version: 1.0.0
created: 2026-03-01
updated: 2026-03-01
changelog:
  - 1.0.0: 初始版本
---

# DoD: 修复 desires_type_check 约束

## 验收清单

- [ ] migration 094 文件存在：`packages/brain/migrations/094_fix_desires_type_check.sql`
  - Test: `tests/packages/brain/migrations/094_fix_desires_type_check.sql`
- [ ] migration 094 包含 DROP + ADD CONSTRAINT，覆盖全部 8 种类型
  - Test: `manual:grep -q "act.*follow_up.*explore" packages/brain/migrations/094_fix_desires_type_check.sql`
- [ ] selfcheck.js EXPECTED_SCHEMA_VERSION 更新为 '094'
  - Test: `manual:grep -q "EXPECTED_SCHEMA_VERSION = '094'" packages/brain/src/selfcheck.js`
- [ ] facts-check 通过
  - Test: `manual:node scripts/facts-check.mjs`
- [ ] version-sync 通过
  - Test: `manual:bash scripts/check-version-sync.sh`

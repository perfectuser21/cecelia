---
id: prd-liveness-phase2
version: 1.0.0
created: 2026-02-26
updated: 2026-02-26
changelog:
  - 1.0.0: 初始版本
---

# PRD: Cecelia 活性信号 Phase 2+3 — InnerLife 面板 + 时序感知

## 背景

PR #34 实现了 MVP 活性信号（cognitive:state 广播 + 呼吸脉动 UI）。
本 PR 完成剩余两个 Phase，让 Cecelia 从"有心跳"升级到"有内心世界"。

## Phase 2: InnerLife 面板

### 目标
在 CeceliaPage 新增一个折叠面板，展示 Cecelia 的"内心世界"：
- 反刍进度（已消化/未消化知识条数）
- 反思累积（accumulator/threshold 进度条）
- 最近洞察（rumination 产生的 memory_stream 洞察）
- 最近欲望（desire 列表 + 状态）

### 数据来源
- GET /api/brain/inner-life 已存在（PR #25 实现）
- 通过 WebSocket 实时更新：cognitive:state 事件中的 meta 字段

### UI 设计
- 位于 AgentMonitor 同列或下方
- 折叠式：默认展开，点击可折叠
- 每个指标用小卡片展示，带进度条或图标

## Phase 3: 时序感知 + ActivityFeed 增强

### 目标
让用户感知 Cecelia 的行为随时间变化：
- EventStream 增强：显示 cognitive:state 事件，带时间戳和持续时间
- 认知阶段变更记录：从 idle → planning → dispatching 的流转可视化
- Tick 执行摘要：每次 tick 完成后在 EventStream 显示摘要卡片

### UI 设计
- EventStream 新增 cognitive:state 事件类型渲染
- 每个 tick 完成后显示摘要：执行了 N 个动作，耗时 Xms
- 阶段变更显示为时间线节点

## 成功标准

1. InnerLife 面板能展示反刍/反思/洞察/欲望 4 类数据
2. EventStream 能显示 cognitive:state 事件
3. Tick 完成后自动显示摘要卡片
4. 所有数据通过 WebSocket 实时更新
5. TypeScript 类型检查通过

# DoD - Initiative 4-Phase PR2: Orchestrator 核心

## 验收标准

### D1: initiative-orchestrator.js 状态机
- [ ] getNextStepForInitiative: plan phase 逻辑
      Test: brain/src/__tests__/initiative-orchestrator.test.js
- [ ] getNextStepForInitiative: review phase 逻辑
      Test: brain/src/__tests__/initiative-orchestrator.test.js
- [ ] getNextStepForInitiative: dev phase 逻辑
      Test: brain/src/__tests__/initiative-orchestrator.test.js
- [ ] getNextStepForInitiative: verify phase 逻辑
      Test: brain/src/__tests__/initiative-orchestrator.test.js
- [ ] handlePhaseTransition: 合法转换成功
      Test: brain/src/__tests__/initiative-orchestrator.test.js
- [ ] handlePhaseTransition: 非法转换被拒
      Test: brain/src/__tests__/initiative-orchestrator.test.js
- [ ] handlePhaseTransition: 乐观锁防并发
      Test: brain/src/__tests__/initiative-orchestrator.test.js
- [ ] promoteInitiativeTasks: draft→queued 批量
      Test: brain/src/__tests__/initiative-orchestrator.test.js
- [ ] createPlanTask: 创建 initiative_plan task
      Test: brain/src/__tests__/initiative-orchestrator.test.js
- [ ] createVerifyTask: 创建 initiative_verify task
      Test: brain/src/__tests__/initiative-orchestrator.test.js
- [ ] checkInitiativeHealth: 3/5 失败触发 replan
      Test: brain/src/__tests__/initiative-orchestrator.test.js

### D2: tick.js 集成
- [ ] Section 0.8.5 调用 checkOrchestratedInitiatives
      Test: brain/src/__tests__/initiative-orchestrator-tick.test.js

### D3: initiative-closer 跳过
- [ ] orchestrated initiative 被跳过
      Test: brain/src/__tests__/initiative-closer-orchestrated.test.js

### D4: decomposition-checker 跳过
- [ ] Check 6 对 orchestrated 跳过
      Test: brain/src/__tests__/decomp-checker-orchestrated.test.js

### D5: CI/CD
- [ ] CI 通过
      Test: contract:C1-001

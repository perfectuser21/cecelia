# PRD - 优化 thalamus.js 决策质量和准确性

## 背景
任务来自 Brain 自动调度。
任务类型：dev

## 功能描述
增强 thalamus.js 的决策逻辑，提高对复杂任务场景的识别和处理能力，包括：
1. 扩展 ACTION_WHITELIST 覆盖范围
2. 增强 quickRoute 快速路由能力
3. 增加决策上下文感知能力（任务历史成功率）

## 成功标准
- [ ] ACTION_WHITELIST 新增至少 5 个 action 类型
- [ ] quickRoute 新增至少 3 个快速路由场景
- [ ] 增加基于历史成功率的置信度调整逻辑
- [ ] 代码通过 facts-check 和版本同步检查

## 详细设计

### 1. 扩展 ACTION_WHITELIST
新增 action 类型：
- `reschedule_task`: 重新安排任务时间
- `aggregate_tasks`: 聚合相似任务
- `merge_tasks`: 合并可合并的任务
- `split_task`: 拆分大型任务
- `notify_oncall`: 通知值班人员
- `adjust_resource_allocation`: 调整资源分配
- `trigger_backup`: 触发备份
- `rotate_credentials`: 凭据轮换

### 2. 增强 quickRoute
新增快速路由场景：
- 周期性任务调度（基于 cron 表达式）
- 资源压力快速响应（基于阈值）
- 任务依赖链检测
- 批量任务完成处理

### 3. 决策上下文感知
- 查询任务历史成功率
- 根据成功率调整置信度
- 低成功率任务自动升级到 L2

## 验收标准
1. 代码修改后 facts-check 通过
2. 版本号同步更新
3. 单元测试覆盖新增逻辑
4. quickRoute 覆盖率达到 80% 以上（基于事件类型）

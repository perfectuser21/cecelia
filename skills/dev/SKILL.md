---
name: dev
description: |
  ç»Ÿä¸€å¼€å‘å·¥ä½œæµå…¥å£ã€‚ä¸€ä¸ªå¯¹è¯å®Œæˆæ•´ä¸ªå¼€å‘æµç¨‹ã€‚

  è§¦å‘æ¡ä»¶ï¼š
  - ç”¨æˆ·è¯´ä»»ä½•å¼€å‘ç›¸å…³çš„éœ€æ±‚
  - ç”¨æˆ·è¯´ /dev
  - Hook è¾“å‡º [SKILL_REQUIRED: dev]
---

# /dev - ç»Ÿä¸€å¼€å‘å·¥ä½œæµ

## 11 æ­¥æµç¨‹

| Step | å†…å®¹ | è¯¦æƒ… |
|------|------|------|
| 1 | PRD ç¡®å®š | â†’ [01-prd.md](steps/01-prd.md) |
| 2 | æ£€æµ‹é¡¹ç›®ç¯å¢ƒ | â†’ [02-detect.md](steps/02-detect.md) |
| 3 | åˆ›å»ºåˆ†æ”¯ | â†’ [03-branch.md](steps/03-branch.md) |
| 4 | æ¨æ¼” DoD | â†’ [04-dod.md](steps/04-dod.md) |
| 5 | å†™ä»£ç  | â†’ [05-code.md](steps/05-code.md) |
| 6 | å†™æµ‹è¯• | â†’ [06-test.md](steps/06-test.md) |
| 7 | è´¨æ£€ï¼ˆä¸‰å±‚ï¼‰| â†’ [07-quality.md](steps/07-quality.md) |
| 8 | æäº¤ PR | â†’ [08-pr.md](steps/08-pr.md) |
| 9 | CI | â†’ [09-ci.md](steps/09-ci.md) |
| 10 | Learning | â†’ [10-learning.md](steps/10-learning.md) |
| 11 | Cleanup | â†’ [11-cleanup.md](steps/11-cleanup.md) |

---

## æµç¨‹å›¾ï¼ˆä¸€ä¸ªå¯¹è¯å®Œæˆï¼‰

```
/dev å¼€å§‹
    â”‚
    â”œâ”€â”€ æœ‰å¤´ï¼šç”¨æˆ·è¯´éœ€æ±‚ â†’ Step 1 PRD ç¡®å®š
    â”‚                           â”‚
    â””â”€â”€ æ— å¤´ï¼šHook è§¦å‘ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                        Step 2: æ£€æµ‹é¡¹ç›®ç¯å¢ƒ
                                â”‚
                                â–¼
                        Step 3: åˆ›å»ºåˆ†æ”¯
                                â”‚
                                â–¼
                        Step 4: æ¨æ¼” DoDï¼ˆä¸åœé¡¿ï¼Œç»§ç»­ï¼‰
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Loop: Step 5-7 (Subagent æ‰§è¡Œ)                   â”‚
â”‚                                                   â”‚
â”‚  ä¸» Agent è°ƒç”¨ Task tool å¯åŠ¨ Subagent            â”‚
â”‚      â”‚                                            â”‚
â”‚      â–¼                                            â”‚
â”‚  Subagent:                                        â”‚
â”‚      â”‚                                            â”‚
â”‚      â”œâ”€â”€ åˆ›å»º .subagent-lock                      â”‚
â”‚      â”‚                                            â”‚
â”‚      â”œâ”€â”€ Step 5: å†™ä»£ç                            â”‚
â”‚      â”‚      â†“                                     â”‚
â”‚      â”œâ”€â”€ Step 6: å†™æµ‹è¯•                           â”‚
â”‚      â”‚      â†“                                     â”‚
â”‚      â””â”€â”€ Step 7: è´¨æ£€ï¼ˆä¸‰å±‚ï¼‰                     â”‚
â”‚             â”‚                                     â”‚
â”‚             â”œâ”€â”€ å¤±è´¥ â†’ SubagentStop Hook é˜»æ­¢é€€å‡º â”‚
â”‚             â”‚         ç»§ç»­ä¿®å¤ï¼Œloop_count++      â”‚
â”‚             â”‚                                     â”‚
â”‚             â””â”€â”€ é€šè¿‡ â†’ åˆ é™¤ .subagent-lock        â”‚
â”‚                        SubagentStop Hook æ”¾è¡Œ     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
Step 8: æäº¤ PR
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Loop: Step 9                                     â”‚
â”‚                                                   â”‚
â”‚  Step 9: CI                                       â”‚
â”‚      â”‚                                            â”‚
â”‚      â”œâ”€â”€ å¤±è´¥ â†’ è¿”å› Step 4ï¼ˆä» Step 5 é‡æ–°å¼€å§‹ï¼‰â”‚
â”‚      â”‚                                            â”‚
â”‚      â””â”€â”€ é€šè¿‡ â†“                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
Step 10: Learningï¼ˆå¿…é¡»ï¼‰
    â”‚
    â–¼
Step 11: Cleanup
    â”‚
    â–¼
å®Œæˆ ğŸ‰
```

**å…³é”®**ï¼š
- æœ‰å¤´/æ— å¤´ä¸¤ä¸ªå…¥å£ä¸€æ¡çº¿
- Step 1 PRD ç¡®å®šåä¸åœé¡¿ï¼Œç›´åˆ° Step 4 DoD
- å¤±è´¥è¿”å›é€»è¾‘ï¼š
  - Step 6 å†™æµ‹è¯•å¤±è´¥ â†’ ç»§ç»­ Step 6
  - Step 7 è´¨æ£€å¤±è´¥ â†’ è¿”å› Step 4ï¼ˆä» Step 5 é‡æ–°å¼€å§‹ï¼Œ5â†’6â†’7 å¾ªç¯ï¼‰
  - Step 8 PR è¢« Hook æ‹¦æˆª â†’ è¿”å› Step 4ï¼ˆHook ä¼šæ£€æŸ¥è´¨æ£€æŠ¥å‘Šå’Œæµç¨‹çŠ¶æ€ï¼‰
  - Step 9 CI çº¢ â†’ è¿”å› Step 4ï¼ˆä» Step 5 é‡æ–°å¼€å§‹ï¼Œ5â†’6â†’7 å¾ªç¯ï¼‰
- Step 10 Learning æ˜¯å¿…é¡»çš„
- æ•´ä¸ªæµç¨‹åœ¨ä¸€ä¸ªå¯¹è¯ä¸­å®Œæˆï¼Œå¤±è´¥æ—¶è‡ªåŠ¨å¾ªç¯ï¼Œä¸æ–­å¼€

---

## æ ¸å¿ƒè§„åˆ™

1. **åªåœ¨ cp-* æˆ– feature/* åˆ†æ”¯å†™ä»£ç ** - Hook å¼•å¯¼
2. **æ­¥éª¤çŠ¶æ€æœº** - Hook æ£€æŸ¥ `git config branch.*.step`ï¼Œstep >= 4 æ‰èƒ½å†™ä»£ç 
3. **Step 5-7 å¿…é¡»é€šè¿‡ Subagent æ‰§è¡Œ** - Hook å¼ºåˆ¶ï¼ˆè§ä¸‹æ–¹è¯´æ˜ï¼‰
4. **develop æ˜¯ä¸»å¼€å‘çº¿** - PR åˆå¹¶å› develop
5. **main å§‹ç»ˆç¨³å®š** - åªåœ¨é‡Œç¨‹ç¢‘æ—¶ä» develop åˆå¹¶
6. **CI æ˜¯å”¯ä¸€å¼ºåˆ¶æ£€æŸ¥** - å…¶ä»–éƒ½æ˜¯å¼•å¯¼

---

## Step 5-7 Subagent æ‰§è¡Œæœºåˆ¶

**å¼ºåˆ¶æœºåˆ¶**ï¼šä¸» Agent åœ¨ step=4-6 æœŸé—´å°è¯•å†™ä»£ç ä¼šè¢« `branch-protect.sh` é˜»æ­¢ï¼Œå¿…é¡»é€šè¿‡ Task tool å¯åŠ¨ Subagentã€‚

### è°ƒç”¨æ–¹å¼

```
Task(
  subagent_type="general-purpose",
  prompt="æ‰§è¡Œ Step 5-7:
    1. åˆ›å»º .subagent-lock æ–‡ä»¶
    2. å†™ä»£ç  (Step 5)
    3. å†™æµ‹è¯• (Step 6)
    4. è´¨æ£€ (Step 7)
    5. ç”Ÿæˆ .quality-report.json
    è´¨æ£€é€šè¿‡ååˆ é™¤ .subagent-lock"
)
```

### Hook æœºåˆ¶

| Hook | è§¦å‘æ—¶æœº | ä½œç”¨ |
|------|----------|------|
| branch-protect.sh | ä¸» Agent å†™ä»£ç  | step=4-6 ä¸”æ—  .subagent-lock â†’ é˜»æ­¢ |
| subagent-quality-gate.sh | Subagent é€€å‡º | æ£€æŸ¥ .quality-report.jsonï¼Œæœªé€šè¿‡ â†’ é˜»æ­¢é€€å‡º |

### çŠ¶æ€è¿½è¸ª

```bash
# Subagent å¯åŠ¨æ—¶
touch .subagent-lock

# è´¨æ£€é€šè¿‡å
rm .subagent-lock
git config branch.$BRANCH.loop_count <N>  # è®°å½•å¾ªç¯æ¬¡æ•°
```

---

## æ­¥éª¤çŠ¶æ€æœº

ç”¨ `git config branch.cp-xxx.step` è¿½è¸ªå½“å‰æ­¥éª¤ï¼š

| step | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| 1 | PRD ç¡®å®š | éœ€æ±‚æ˜ç¡® |
| 2 | é¡¹ç›®ç¯å¢ƒæ£€æµ‹å®Œæˆ | .project-info.json ç”Ÿæˆ |
| 3 | åˆ†æ”¯å·²åˆ›å»º | cp-* æˆ– feature/* åˆ†æ”¯ |
| 4 | DoD å®Œæˆ | DoD æ¨æ¼”å®Œæˆï¼Œ**å¯ä»¥å†™ä»£ç ** |
| 5 | ä»£ç å®Œæˆ | åŠŸèƒ½ä»£ç å†™å®Œ |
| 6 | æµ‹è¯•å®Œæˆ | æµ‹è¯•ä»£ç å†™å®Œ |
| 7 | è´¨æ£€é€šè¿‡ | ä¸‰å±‚è´¨æ£€é€šè¿‡ï¼Œ**å¯ä»¥æäº¤** |
| 8 | PR å·²åˆ›å»º | ç­‰å¾… CI |
| 9 | CI é€šè¿‡ | CI æ£€æŸ¥å®Œæˆ |
| 10 | Learning å®Œæˆ | ç»éªŒå·²è®°å½• |
| 11 | å·²æ¸…ç† | åˆ†æ”¯åˆ é™¤ |

### Hook å¼•å¯¼

**branch-protect.sh** (PreToolUse - Write/Edit):
- å¼•å¯¼ step >= 4 æ‰èƒ½å†™ä»£ç 
- å¼•å¯¼åªåœ¨ cp-* æˆ– feature/* åˆ†æ”¯å†™ä»£ç 
- **å¼ºåˆ¶** step=4-6 å¿…é¡»æœ‰ .subagent-lock æ‰èƒ½å†™ä»£ç 

**subagent-quality-gate.sh** (SubagentStop):
- Subagent é€€å‡ºæ—¶æ£€æŸ¥ .quality-report.json
- è´¨æ£€æœªé€šè¿‡ â†’ exit 2 é˜»æ­¢é€€å‡ºï¼Œloop_count++
- è´¨æ£€é€šè¿‡ â†’ åˆ é™¤ .subagent-lockï¼Œè®¾ç½® step=7

**pr-gate.sh** (PreToolUse - Bash):
- æ‹¦æˆª `gh pr create`ï¼Œè¿è¡Œè´¨æ£€
- å¤±è´¥æ—¶å›é€€åˆ° step 4ï¼Œå¼•å¯¼ä¿®å¤åé‡è¯•

**stop-gate.sh** (Stop):
- é€€å‡ºæ—¶æ£€æŸ¥ä»»åŠ¡å®Œæˆåº¦
- æ˜¾ç¤ºè¿›åº¦å»ºè®®

**project-detect.sh** (PostToolUse - Bash):
- æ£€æµ‹é¡¹ç›®åˆå§‹åŒ–çŠ¶æ€
- ç”Ÿæˆ .project-info.json

**session-init.sh** (SessionStart):
- ä¼šè¯åˆå§‹åŒ–ï¼Œæ¢å¤ä¸Šä¸‹æ–‡
- è¯»å–å·²ä¿å­˜çš„æ­¥éª¤çŠ¶æ€

**æ³¨æ„**ï¼šæ‰€æœ‰ Hook éƒ½æ˜¯å¼•å¯¼æ€§çš„ï¼ŒCI æ˜¯å”¯ä¸€å¼ºåˆ¶æ£€æŸ¥ã€‚

---

## å¿«é€Ÿä¿®å¤æ¨¡å¼

**é€‚ç”¨æ¡ä»¶**ï¼ˆå…¨éƒ¨æ»¡è¶³ï¼‰ï¼š
- `fix:` ç±»å‹ä¿®å¤
- å•æ–‡ä»¶æˆ–å°‘é‡æ”¹åŠ¨
- éœ€æ±‚æ˜ç¡®

**å¯ç®€åŒ–**ï¼šStep 1 PRD ç¡®å®šå¯ä»¥å¿«é€Ÿå®Œæˆ

---

## æµ‹è¯•ä»»åŠ¡æ¨¡å¼

**è§¦å‘æ¡ä»¶**ï¼šPRD æ ‡é¢˜åŒ…å« `[TEST]` å‰ç¼€

```
ç”¨æˆ·: "æˆ‘æƒ³æµ‹è¯•ä¸€ä¸‹ [TEST] æ–°çš„ç™»å½•æµç¨‹"
    â†“
Claude: æ£€æµ‹åˆ° [TEST] å‰ç¼€
    â†“
è®¾ç½®: git config branch.$BRANCH_NAME.is-test true
```

**æµ‹è¯•ä»»åŠ¡çš„ç‰¹æ®Šå¤„ç†**ï¼š

| Step | æ­£å¸¸ä»»åŠ¡ | æµ‹è¯•ä»»åŠ¡ |
|------|----------|----------|
| 8 PR | æ›´æ–° CHANGELOG + ç‰ˆæœ¬å· | è·³è¿‡ï¼Œcommit ç”¨ `test:` å‰ç¼€ |
| 10 Learning | å¿…é¡»è®°å½• | å¯é€‰ï¼ˆåªè®°å½•æµç¨‹ç»éªŒï¼‰ |
| 11 Cleanup | æ ‡å‡†æ¸…ç† | é¢å¤–æ£€æŸ¥æ®‹ç•™ |

**ä¸ºä»€ä¹ˆéœ€è¦æµ‹è¯•æ¨¡å¼**ï¼š
- æµ‹è¯•ä»»åŠ¡çš„ä»£ç æœ€ç»ˆä¼šåˆ é™¤
- ä¸åº”è¯¥äº§ç”ŸçœŸå®çš„ç‰ˆæœ¬å·å’Œ CHANGELOG è®°å½•
- é˜²æ­¢"ç‰ˆæœ¬å·å¢åŠ ä½†åŠŸèƒ½è¢«åˆ é™¤"çš„çŸ›ç›¾

---

## ç‰ˆæœ¬å·è§„åˆ™ (semver)

| commit ç±»å‹ | ç‰ˆæœ¬å˜åŒ– |
|-------------|----------|
| fix: | patch (+0.0.1) |
| feat: | minor (+0.1.0) |
| feat!: / BREAKING: | major (+1.0.0) |

---

## åŠ è½½ç­–ç•¥

```
skills/dev/
â”œâ”€â”€ SKILL.md        â† ä½ åœ¨è¿™é‡Œï¼ˆå…¥å£ï¼‰
â”œâ”€â”€ steps/          â† æ¯æ­¥ä¸€ä¸ªæ–‡ä»¶
â”‚   â”œâ”€â”€ 01-prd.md
â”‚   â”œâ”€â”€ 02-detect.md
â”‚   â”œâ”€â”€ 03-branch.md
â”‚   â”œâ”€â”€ 04-dod.md
â”‚   â”œâ”€â”€ 05-code.md
â”‚   â”œâ”€â”€ 06-test.md
â”‚   â”œâ”€â”€ 07-quality.md
â”‚   â”œâ”€â”€ 08-pr.md
â”‚   â”œâ”€â”€ 09-ci.md
â”‚   â”œâ”€â”€ 10-learning.md
â”‚   â””â”€â”€ 11-cleanup.md
â””â”€â”€ scripts/        â† è¾…åŠ©è„šæœ¬
    â”œâ”€â”€ cleanup.sh
    â”œâ”€â”€ check.sh
    â”œâ”€â”€ wait-for-merge.sh
    â”œâ”€â”€ scan-change-level.sh
    â””â”€â”€ multi-feature.sh
```

**æ‰§è¡Œæ—¶æŒ‰éœ€åŠ è½½å¯¹åº”æ­¥éª¤æ–‡ä»¶ï¼Œå‡å°‘ä¸Šä¸‹æ–‡å¼€é”€ã€‚**

---

## å®Œæˆåº¦æ£€æŸ¥

**Cleanup åè¿è¡Œ**ï¼š

```bash
bash skills/dev/scripts/check.sh "$BRANCH_NAME" "$BASE_BRANCH"
```

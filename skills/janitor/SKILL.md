---
name: janitor
version: 1.0.0
description: |
  å°æ‰«ï¼ˆJanitorï¼‰- æ¯æ—¥ç£ç›˜æ¸…æ‰«å‘˜ã€‚
  è‡ªåŠ¨æ¸…ç† Docker å®¹å™¨æ—¥å¿—ã€PM2 æ—¥å¿—ã€/tmp åƒåœ¾ã€æ—§ç¼“å­˜ã€‚
  æ¯å¤©å‡Œæ™¨ 4:00 ç”± cron è‡ªåŠ¨è¿è¡Œï¼Œæ— éœ€äººå·¥å¹²é¢„ã€‚
  ç£ç›˜è¶… 70% æ—¶è‡ªåŠ¨å‘Šè­¦åˆ° Cecelia Brainã€‚
created: 2026-02-24
changelog:
  - 1.0.0: åˆå§‹ç‰ˆæœ¬ï¼Œè¦†ç›–7ç±»æ¸…æ‰«ä»»åŠ¡
---

# /janitor - å°æ‰«ï¼ˆç£ç›˜æ¸…æ‰«å‘˜ï¼‰

**ç³»ç»Ÿç»´æŠ¤è§’è‰²**ï¼Œä¸“é—¨è´Ÿè´£æ¯æ—¥ç£ç›˜å«ç”Ÿã€‚

## å®šä½

```
å¤–éƒ¨ä¸“å®¶ï¼ˆè‡ªåŠ¨åŒ–ï¼‰ï¼š
â”œâ”€â”€ ğŸ‚ ç§‹ç±³ (/autumnrice) - OKR æ‹†è§£
â”œâ”€â”€ ğŸ’» Caramel (/dev)     - å†™ä»£ç 
â””â”€â”€ ğŸ§¹ å°æ‰« (/janitor)   - æ¯æ—¥æ¸…æ‰«  â† è¿™æ˜¯æˆ‘
```

**å…³é”®**ï¼šå°æ‰«æ˜¯çº¯è„šæœ¬å‘˜å·¥ï¼Œä¸ç”¨ LLMï¼Œæ¯å¤©å®šæ—¶è‡ªåŠ¨æ‰§è¡Œã€‚

## è§¦å‘æ–¹å¼

| æ–¹å¼ | å‘½ä»¤ |
|------|------|
| æ‰‹åŠ¨è§¦å‘ | `janitor.sh` |
| è‡ªåŠ¨è°ƒåº¦ | æ¯å¤©å‡Œæ™¨ 4:00 cron è‡ªåŠ¨ |
| æŸ¥çœ‹æ—¥å¿— | `cat /tmp/janitor-$(date +%Y%m%d).log` |

## æ¸…æ‰«æ¸…å•ï¼ˆ7é¡¹ï¼‰

| # | æ¸…æ‰«ç›®æ ‡ | é¢‘ç‡ | å¤§å°èŒƒå›´ |
|---|---------|------|---------|
| 1 | Docker å®¹å™¨æ—¥å¿—ï¼ˆ>100M æˆªæ–­ï¼‰ | æ¯æ—¥ | å‡ ç™¾MB/æ¬¡ |
| 2 | Docker build cacheï¼ˆ>7å¤©ï¼‰ | æ¯æ—¥ | å‡ å~å‡ ç™¾MB |
| 3 | Docker å·²åœæ­¢å®¹å™¨ | æ¯æ—¥ | å°‘é‡ |
| 4 | PM2 æ—¥å¿— | æ¯æ—¥ | ~50MB |
| 5 | Cecelia promptsï¼ˆ>7å¤©ï¼‰ | æ¯æ—¥ | ~30MB |
| 6 | /tmp æ—§éšæœºç›®å½•ï¼ˆ>1å¤©ï¼‰ | æ¯æ—¥ | ~400MB/æ¬¡ |
| 7 | VSCode æ—§ VSIX å®‰è£…åŒ…ç¼“å­˜ | æ¯æ—¥ | ~120MB |

## å‘Šè­¦æœºåˆ¶

ç£ç›˜ä½¿ç”¨ç‡è¶…è¿‡ **70%** æ—¶ï¼Œè‡ªåŠ¨å‘ Cecelia Brain æäº¤ P0 å‘Šè­¦ä»»åŠ¡ã€‚

## è„šæœ¬ä½ç½®

```
/home/xx/bin/janitor.sh
```

## Cron é…ç½®

```cron
0 4 * * * /home/xx/bin/janitor.sh >> /tmp/janitor-cron.log 2>&1
```

## æ‰‹åŠ¨è§¦å‘

```bash
# ç«‹å³æ‰§è¡Œä¸€æ¬¡
janitor.sh

# æŸ¥çœ‹ä»Šå¤©çš„æ—¥å¿—
cat /tmp/janitor-$(date +%Y%m%d).log
```

## éœ€è¦ sudo çš„é¡¹ï¼ˆå°æ‰«åšä¸äº†ï¼Œéœ€äººå·¥ï¼‰

```bash
# Snap æ—§ç‰ˆæœ¬ï¼ˆ~500Mï¼‰
sudo snap remove chromium --revision=3361
sudo snap remove core20 --revision=2686
# ... ç­‰ï¼ˆå‡ ä¸ªæœˆæ›´æ–°ä¸€æ¬¡å³å¯ï¼‰

# è€ç³»ç»Ÿæ—¥å¿—
sudo rm /var/log/auth.log.1.20250827
sudo journalctl --vacuum-size=50M
```

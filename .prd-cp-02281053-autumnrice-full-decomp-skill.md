---
id: cp-02281053-autumnrice-full-decomp-skill
version: 1.0.0
created: 2026-02-28
updated: 2026-02-28
changelog:
  - 1.0.0: 初始版本
---

# PRD: autumnrice/chat 全量注入 /decomp skill

## 背景

`autumnrice/chat` 端点目前将 `/decomp` skill 内容截断到 1500 字注入 system prompt。
`/decomp` SKILL.md 实际有 7500+ 字，截断导致秋米丢失大量 OKR 方法论知识。

## 目标

移除 `.slice(0, 1500)` 截断，全量注入 `/decomp` SKILL.md 内容，
让秋米在对话中具备完整的 OKR 拆解专业知识。

## 改动范围

**文件**：`packages/brain/src/routes.js`

**改动**：`POST /autumnrice/chat` 中

```javascript
// Before（截断）
const decompSkillBlock = _decompSkillContent
  ? `...\n\n${_decompSkillContent.slice(0, 1500)}...\n\n---\n\n`
  : '';

// After（全量）
const decompSkillBlock = _decompSkillContent
  ? `...\n\n${_decompSkillContent}\n\n---\n\n`
  : '';
```

## 验收标准

1. routes.js 中不再有 `.slice(0, 1500)` 截断
2. autumnrice/chat API 调用成功返回
3. Brain CI 通过

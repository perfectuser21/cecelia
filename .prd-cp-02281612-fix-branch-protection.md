---
id: prd-cp-02281612-fix-branch-protection
version: 1.0.0
created: 2026-02-28
updated: 2026-02-28
changelog:
  - 1.0.0: 初始版本
---

# PRD: 修复 cecelia branch protection，移除 Dashboard Build required check

## 背景

`perfectuser21/cecelia` 的 branch protection 当前 required checks：
- `Dashboard Build`
- `ci-passed`

问题：engine-only PR 会 SKIP `Dashboard Build` job（因为 workspace 文件未变更）。
GitHub 把 SKIP 视为"未满足 required check" → PR 状态 BLOCKED。

正确行为：`ci-passed` 已经在每个 CI workflow 里处理了"非目标 package 变更时快速通过"的情况，
不需要额外指定具体 job 名（如 Dashboard Build）为 required check。

## 目标

1. 通过 GitHub API 直接修复 cecelia 的 branch protection（移除 Dashboard Build，只保留 ci-passed）
2. 将 `perfectuser21/cecelia` 加入 `setup-branch-protection.sh` 的覆盖范围，防止配置漂移

## 需要修改的文件

1. `packages/engine/scripts/setup-branch-protection.sh` — 加 cecelia 到 DEFAULT_REPOS，同步 BRANCHES 策略

## 成功标准

1. cecelia main 分支保护的 required_status_checks 只包含 `ci-passed`
2. setup-branch-protection.sh `--check perfectuser21/cecelia` 输出"保护正确"
3. engine-only PR（如修改 skills/dev/steps/*.md）不再因 Dashboard Build SKIP 被 BLOCKED

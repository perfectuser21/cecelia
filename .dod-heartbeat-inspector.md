# DoD: HEARTBEAT.md 灵活巡检 (Phase 2)

## 验收清单

- [ ] D1: HEARTBEAT.md 文件存在于项目根目录，包含自主权边界和定时检查章节 → heartbeat-inspector.test.js
- [ ] D2: heartbeat-inspector.js 导出 runHeartbeatInspection(pool) 函数 → heartbeat-inspector.test.js
- [ ] D3: collectSystemSnapshot(pool) 查询 4 张表返回结构化快照 → heartbeat-inspector.test.js
- [ ] D4: buildHeartbeatPrompt() 将 HEARTBEAT.md + 快照组装为 LLM prompt → heartbeat-inspector.test.js
- [ ] D5: HEARTBEAT_ALLOWED_ACTIONS 硬约束白名单，非白名单 action 被转换为 heartbeat_finding → heartbeat-whitelist.test.js
- [ ] D6: tick.js 集成：基于时间戳的 30min 间隔触发 → heartbeat-tick.test.js
- [ ] D7: 巡检结果通过 executeDecision 走 Decision 流程，source='heartbeat_inspection' → heartbeat-inspector.test.js
- [ ] D8: 巡检事件记录到 cecelia_events (type='heartbeat_inspection') → heartbeat-inspector.test.js
- [ ] D9: L1 丘脑返回 no_action 时静默返回，不创建提案 → heartbeat-inspector.test.js
- [ ] D10: HEARTBEAT.md 不存在时优雅跳过，不报错 → heartbeat-inspector.test.js
- [ ] D11: facts-check.mjs 8/8 通过 → CI
- [ ] D12: version-sync 通过 → CI

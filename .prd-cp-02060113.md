---
id: prd-cp-02060113
version: 1.0.0
created: 2026-02-06
updated: 2026-02-06
changelog:
  - 1.0.0: 初始版本
---

# PRD - 实现执行状态实时展示组件

## 需求来源

任务来自 Brain 自动调度，需要在 Core 前端添加实时显示 Cecelia 执行状态的组件。

## 功能描述

在 Core 前端实现一个实时组件，用于展示 Cecelia 当前的执行状态，包括：
1. 当前正在执行的任务列表
2. 每个任务的执行状态（queued/running/completed/failed）
3. 任务的详细信息（标题、进度、开始时间、持续时间）
4. 实时更新（WebSocket 或轮询）

## 涉及文件

**Frontend (React)**:
- `frontend/src/components/Cecelia/ExecutionStatus.tsx` - 新建主组件
- `frontend/src/components/Cecelia/TaskCard.tsx` - 新建任务卡片组件
- `frontend/src/api/cecelia.ts` - API 调用函数
- `frontend/src/types/cecelia.ts` - TypeScript 类型定义

**Backend API**:
- API endpoint: `GET /api/cecelia/runs` - 获取当前运行的任务
- API endpoint: `GET /api/cecelia/runs/:id` - 获取单个任务详情

**集成**:
- Core 前端路由或页面中集成该组件

## 成功标准

- [ ] 组件能够展示当前所有运行中的任务
- [ ] 每个任务显示标题、状态、进度、时间信息
- [ ] 状态实时更新（刷新间隔 ≤ 5 秒）
- [ ] UI 美观，符合 Core 前端设计风格
- [ ] 支持查看任务详情（点击卡片）
- [ ] 错误状态有明确提示

## 非目标

- 不实现任务创建功能（仅展示）
- 不实现任务终止功能（仅展示）
- 不实现历史任务查看（仅显示当前运行的任务）

## 技术方案

### 数据源

使用现有的 Brain API：
- `/api/brain/status` - 获取完整状态
- `/api/cecelia/runs` - 获取执行记录
- `/api/cecelia/runs/:id` - 获取单个任务详情

### 更新策略

使用轮询方式（5 秒间隔），后续可升级为 WebSocket。

### 组件层级

```
ExecutionStatus (容器)
  ├── TaskCard (任务卡片) x N
  │     ├── 标题
  │     ├── 状态标签
  │     ├── 进度条
  │     └── 时间信息
  └── EmptyState (无任务时显示)
```

## UI 设计要点

- 使用 Core 前端现有的设计系统（颜色、字体、间距）
- 状态用颜色区分：
  - queued: 灰色
  - running: 蓝色/动画
  - completed: 绿色
  - failed: 红色
- 进度条使用平滑动画
- 卡片支持悬停效果

## 验收清单

1. 组件正确获取并展示当前运行的任务
2. 状态自动刷新（5 秒间隔）
3. UI 符合设计规范
4. 无控制台错误
5. TypeScript 类型安全
6. 响应式设计（移动端友好）

---
id: prd-quickroute-okr-events
version: 1.0.0
created: 2026-02-17
updated: 2026-02-17
changelog:
  - 1.0.0: 初始版本
---

# PRD: 扩展 quickRoute - OKR 状态类事件

## 需求来源

当前 quickRoute 函数已处理 HEARTBEAT、TICK、TASK_COMPLETED、TASK_FAILED、TASK_TIMEOUT、TASK_CREATED 事件。
OKR_CREATED 和 OKR_PROGRESS_UPDATE 事件全部走 Sonnet，但这两个事件通常不需要 LLM 决策，造成不必要的调用。

## 功能描述

在 thalamus.js 的 quickRoute() 函数中为以下 OKR 事件添加快速路由：

- OKR_CREATED → log_event, confidence=0.95, level=0
- OKR_PROGRESS_UPDATE 且 !is_blocked → log_event, confidence=0.9, level=0
- OKR_BLOCKED → return null（保持 Sonnet 路由，需要深度分析）

## 成功标准

- OKR_CREATED 事件 quickRoute 返回 level=0, action=log_event, confidence=0.95
- OKR_PROGRESS_UPDATE(!is_blocked) quickRoute 返回 level=0, action=log_event, confidence=0.9
- OKR_BLOCKED 仍然返回 null（由 Sonnet 处理）
- 新增测试用例 3 个，npm test 通过
- facts-check.mjs 通过
- DevGate 通过

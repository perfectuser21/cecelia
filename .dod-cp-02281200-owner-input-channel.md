---
id: dod-owner-input-channel
version: 1.0.2
created: 2026-02-28
updated: 2026-02-28
changelog:
  - 1.0.0: 初始版本
  - 1.0.1: 修复 Test 字段格式（无 dash）
  - 1.0.2: 修复 Test 类型（manual: 命令格式）
---

# DoD: owner_input 渠道（PR-C）

## 验收清单

- [x] **DOD-1**: 新建 `owner-input-extractor.js`，导出 `extractSuggestionsFromChat(message, intentType)`
  Test: manual: node -e "import('./packages/brain/src/owner-input-extractor.js').then(m=>process.exit(typeof m.extractSuggestionsFromChat==='function'?0:1))"

- [x] **DOD-2**: ACTION_INTENTS（CREATE_TASK 等）→ 创建 suggestion
  Test: manual: npx vitest run packages/brain/src/__tests__/owner-input-extractor.test.js --reporter=verbose 2>&1 | grep "ACTION_INTENTS"

- [x] **DOD-3**: CHAT/QUERY_STATUS → 不创建 suggestion
  Test: manual: npx vitest run packages/brain/src/__tests__/owner-input-extractor.test.js --reporter=verbose 2>&1 | grep "非动作意图"

- [x] **DOD-4**: suggestion source='owner_input', type='owner_request'
  Test: manual: npx vitest run packages/brain/src/__tests__/owner-input-extractor.test.js --reporter=verbose 2>&1 | grep "参数验证"

- [x] **DOD-5**: 每次最多创建 1 个（limit 防洪峰）
  Test: manual: npx vitest run packages/brain/src/__tests__/owner-input-extractor.test.js --reporter=verbose 2>&1 | grep "防洪峰"

- [x] **DOD-6**: `orchestrator-chat.js` 步骤 9 添加 fire-and-forget 调用
  Test: manual: npx vitest run packages/brain/src/__tests__/orchestrator-chat.test.js --reporter=verbose 2>&1 | grep "DOD-6"

- [x] **DOD-7**: 所有已有测试通过（无回归）
  Test: manual: npx vitest run packages/brain/src/__tests__/orchestrator-chat.test.js packages/brain/src/__tests__/owner-input-extractor.test.js 2>&1 | grep "passed"

- [x] **DOD-8**: 版本号 bump（minor，新增功能）
  Test: manual: node -e "const v=require('./packages/brain/package.json').version;process.exit(v>='1.131.0'?0:1)"

---
id: dod-owner-input-channel
version: 1.0.1
created: 2026-02-28
updated: 2026-02-28
changelog:
  - 1.0.0: 初始版本
  - 1.0.1: 修复 Test 字段格式 + 标记完成
---

# DoD: owner_input 渠道（PR-C）

## 验收清单

- [x] **DOD-1**: 新建 `owner-input-extractor.js`，导出 `extractSuggestionsFromChat(message, intentType)`
  Test: manual: node -e "require('./packages/brain/src/owner-input-extractor.js').then(m => process.exit(typeof m.extractSuggestionsFromChat === 'function' ? 0 : 1)).catch(() => process.exit(1))"

- [x] **DOD-2**: ACTION_INTENTS（CREATE_TASK 等）→ 创建 suggestion
  Test: unit: owner-input-extractor.test.js DOD-2 section (7 intent types tested)

- [x] **DOD-3**: CHAT/QUERY_STATUS → 不创建 suggestion
  Test: unit: owner-input-extractor.test.js DOD-3 section (CHAT/QUERY_STATUS/UNKNOWN not creating suggestions)

- [x] **DOD-4**: suggestion source='owner_input', type='owner_request'
  Test: unit: owner-input-extractor.test.js DOD-4 section (source + type parameter validation)

- [x] **DOD-5**: 每次最多创建 1 个（limit 防洪峰）
  Test: unit: owner-input-extractor.test.js DOD-5 section (single call creates exactly 1 suggestion)

- [x] **DOD-6**: `orchestrator-chat.js` 步骤 9 添加 fire-and-forget 调用
  Test: unit: orchestrator-chat.test.js D11 section (handleChat triggers extractSuggestionsFromChat async)

- [x] **DOD-7**: 所有已有测试通过（无回归）
  Test: manual: npx vitest run (orchestrator-chat 42/42, owner-input-extractor 19/19)

- [x] **DOD-8**: 版本号 bump（minor，新增功能）
  Test: manual: node -e "const v=require('./packages/brain/package.json').version;process.exit(v>='1.131.0'?0:1)"

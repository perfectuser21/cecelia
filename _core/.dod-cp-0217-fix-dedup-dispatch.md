---
id: dod-fix-dedup-dispatch
version: 1.0.0
created: 2026-02-17
updated: 2026-02-17
changelog:
  - 1.0.0: 初始版本
---

# DoD: 修复重复探索任务和任务状态机 Bug

## 验收清单

- [ ] Check 7 payload 包含 `decomposition: 'continue'`，NOT EXISTS 去重正常工作
- [ ] 同一探索任务不会创建重复续拆任务
- [ ] 无执行器时任务回滚到 `queued`，不卡在 `in_progress`
- [ ] `updateTask` 在 status='in_progress' 时加 `AND status='queued'` 原子保护
- [ ] 重复回调幂等（已完成任务不被覆盖），routes.js 加 `AND status='in_progress'`
- [ ] 所有现有 1244+ 测试继续通过（vitest run）
- [ ] Facts check 通过（node scripts/facts-check.mjs）
- [ ] Version 同步到 v1.48.2（bash scripts/check-version-sync.sh）

## RCI

- **P1**: decomposition-checker.js Check 7 payload fix
- **P1**: tick.js task revert to queued on no executor
- **P2**: actions.js updateTask atomic guard
- **P2**: routes.js execution-callback idempotency

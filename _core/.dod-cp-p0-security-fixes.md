# DoD: P0 安全紧急修复

## 完成标准

### 1. 密码安全修复

- [x] `.env.docker` 从 Git 追踪中移除
  - Test: `git ls-files .env.docker` 返回空
- [x] `.env.docker.example` 已创建
  - Test: 文件存在且包含 `YOUR_PASSWORD_HERE` 占位符
- [x] `.gitignore` 包含 `.env.docker`
  - Test: `grep "^\.env\.docker$" .gitignore` 有匹配
- [x] `db-config.js` password fallback 改为空字符串
  - Test: `grep "password:.*|| ''" brain/src/db-config.js` 有匹配

### 2. 运行时错误修复

- [x] `tick.js:643` 删除错误的 `publishExecutorStatus` 调用
  - Test: `grep -n "publishExecutorStatus.*activeCount" brain/src/tick.js` 无匹配
- [x] 本地测试通过
  - Test: `npm test` 全部通过

### 3. 文档版本同步

- [x] MEMORY.md 版本更新
  - Test: `grep "1.40.4" MEMORY.md` 有匹配
  - Test: `grep "035" MEMORY.md` 有匹配
  - Test: `grep "1244" MEMORY.md` 有匹配
- [x] DEFINITION.md 版本更新
  - Test: Line 584 包含 1.40.4
  - Test: Line 760 包含 1.40.4
  - Test: Line 611 包含 cortex_analyses
  - Test: Line 613 包含 035
  - Test: Line 789 包含 000-035

### 4. CI 验证

- [ ] GitHub Actions CI 通过
  - Test: Version Check ✅
  - Test: Facts Consistency ✅
  - Test: Brain (Node.js) ✅
  - Test: Semantic Brain (Python) ✅

### 5. 代码审查

- [ ] PR 创建并等待审查
- [ ] 所有修改符合最小化原则（只改必要的部分）
- [ ] Commit message 清晰说明修复内容

## 质量门禁

- facts-check.mjs 通过
- check-version-sync.sh 通过
- 所有测试通过（1244+ tests）
- 无新增 lint 错误

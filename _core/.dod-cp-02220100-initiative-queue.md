## DoD - Initiative 队列管理机制

### D1: Migration 047 - 清理积压 initiative 状态
- [ ] migration 047_initiative_queue.sql 创建，将无活跃任务的 active initiative 改为 pending
- [ ] migration 幂等（重复执行不报错）
- **Test**: initiative-queue.test.js Q1

### D2: activateNextInitiatives() 函数
- [ ] initiative-closer.js 新增 activateNextInitiatives(pool) 函数
- [ ] 从 pending 按 KR 优先级激活，总数不超过 MAX_ACTIVE_INITIATIVES(10)
- **Test**: initiative-queue.test.js Q1（少于 MAX 时自动激活到上限）

### D3: 激活数量限制
- [ ] 当前 active 已达 10 个时，返回 0，不激活新的
- **Test**: initiative-queue.test.js Q2

### D4: 优先级顺序
- [ ] P0 KR 的 initiative 先于 P1 的被激活
- **Test**: initiative-queue.test.js Q3

### D5: 空队列安全
- [ ] 没有 pending 时返回 0，不报错
- **Test**: initiative-queue.test.js Q4

### D6: tick.js 集成
- [ ] Section 0.10 每次 tick 触发 activateNextInitiatives()
- [ ] 有激活时输出日志
- **Test**: DevGate facts-check 通过

### D7: initiative 完成后触发激活
- [ ] checkInitiativeCompletion() 关闭 initiative 后调用 activateNextInitiatives()
- **Test**: initiative-queue.test.js（完成后激活）

### D8: 版本 bump
- [ ] brain/package.json 版本从 1.52.12 → 1.53.0（minor bump）
- [ ] check-version-sync.sh 通过
- **Test**: check-version-sync.sh

### D9: DevGate 全部通过
- [ ] facts-check.mjs 通过
- [ ] check-version-sync.sh 通过
- [ ] check-dod-mapping.cjs 通过
- **Test**: CI DevGate check

---
id: prd-quickroute-task-events
version: 1.0.0
created: 2026-02-17
updated: 2026-02-17
changelog:
  - 1.0.0: 初始版本
---

# PRD: 扩展 quickRoute - 任务状态类事件

## 背景

基于探索任务分析结果，在 thalamus.js 的 quickRoute 函数中新增对任务状态相关事件的纯代码处理路径。

## 目标
为以下事件类型添加 quickRoute 规则（无需调用 Sonnet）：
- TASK_FAILED（无复杂原因/重试次数未超限）→ retry_task
- TASK_TIMEOUT → log_event + 降级重试
- TASK_CREATED → no_action（事件驱动下游消费）

## 实施要求
- 修改 brain/src/thalamus.js 中的 quickRoute 函数
- 为每个新增事件类型添加单元测试（thalamus.test.js）
- 确保 facts-check 和 DevGate 通过
- 每次 quickRoute 新增分支必须有对应 Test

## 验收条件
- [ ] quickRoute 新增 3 种事件类型处理
- [ ] 单元测试覆盖新增分支
- [ ] 不破坏现有测试
- [ ] facts-check 通过
- [ ] DevGate 通过

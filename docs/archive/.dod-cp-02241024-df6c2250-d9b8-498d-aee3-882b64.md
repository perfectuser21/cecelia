# DoD - 扩展 actions-dedup.test.js 测试套件

## 验收标准

### 功能验收

- [ ] 新增 `should dedup when canceled task exists` 测试案例
      Test: brain/src/__tests__/actions-dedup.test.js
- [ ] 新增 `should dedup cancelled task within time window` 测试案例
      Test: brain/src/__tests__/actions-dedup.test.js
- [ ] 新增 `should allow re-creation after canceled task expires` 测试案例
      Test: brain/src/__tests__/actions-dedup.test.js
- [ ] 新增 `should handle both canceled and cancelled spellings` 测试案例
      Test: brain/src/__tests__/actions-dedup.test.js

### 边界条件验证

- [ ] 验证 canceled 状态任务阻止重复创建（同 title+goal_id+project_id）
      Test: brain/src/__tests__/actions-dedup.test.js
- [ ] 验证 cancelled 拼写也能正确去重
      Test: brain/src/__tests__/actions-dedup.test.js
- [ ] 验证 canceled 任务的时间窗口机制
      Test: brain/src/__tests__/actions-dedup.test.js
- [ ] 验证 canceled 任务过期后允许重新创建
      Test: brain/src/__tests__/actions-dedup.test.js

### 测试质量验收

- [ ] 所有测试用例通过（npm test）
      Test: brain/src/__tests__/actions-dedup.test.js
- [ ] 测试覆盖率维持 >95%
      Test: contract:C2-001
- [ ] 测试用例包含清晰的描述和断言
      Test: manual:代码审查测试描述清晰度
- [ ] 测试数据清理正确（afterEach cleanup）
      Test: brain/src/__tests__/actions-dedup.test.js

### 兼容性验收

- [ ] 不影响现有测试的通过率
      Test: brain/src/__tests__/actions-dedup.test.js
- [ ] 不修改 actions-dedup.js 的实际逻辑
      Test: manual:文件未修改验证
- [ ] 测试案例遵循现有代码风格
      Test: manual:代码风格一致性检查
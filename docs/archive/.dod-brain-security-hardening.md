---
id: dod-brain-security-hardening
version: 1.0.0
created: 2026-02-26
updated: 2026-02-26
changelog:
  - 1.0.0: Brain 安全加固验收清单
---

# DoD: Brain 安全加固

## 验收清单

- [ ] **1. credentials API 不返回 path** | Test: curl localhost:5221/api/brain/credentials 确认无 path
- [ ] **2. 前端 CredentialEntry 无 path 字段** | Test: TypeScript 编译通过
- [ ] **3. 前端 TeamPage 显示 provider** | Test: Dashboard build 通过
- [ ] **4. migration 077 partial unique index** | Test: SQL 文件存在
- [ ] **5. actions.js ON CONFLICT DO NOTHING** | Test: npm test 通过
- [ ] **6. selfcheck schema 版本 077** | Test: selfcheck 测试通过
- [ ] **7. assertSafeId 拒绝非法 ID** | Test: executor-input-validation 测试
- [ ] **8. assertSafePid 拒绝非法 PID** | Test: executor-input-validation 测试
- [ ] **9. executor 函数调用验证** | Test: 代码审查确认
- [ ] **10. Brain 版本 1.99.3 同步** | Test: check-version-sync.sh
- [ ] **11. DEFINITION.md schema 077** | Test: facts-check.mjs
- [ ] **12. 所有 Brain 测试通过** | Test: npm test -w packages/brain

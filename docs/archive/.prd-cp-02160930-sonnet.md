# PRD: 全部任务改用 Sonnet（成本优化）

## 背景
用户反馈 token 消耗过高。当前配置：
- OKR 拆解：Opus
- Dev 任务：Opus  
- Review/QA：Sonnet

正在运行的 10 个 Opus 任务被强制停止。

## 目标
全部任务改用 Sonnet，降低成本约 70%

## 技术方案

**修改文件**：`brain/src/executor.js`

**修改函数**：`getModelForTask(task)`

**修改内容**：
```javascript
// 修改前
function getModelForTask(task) {
  if (decomposition) return 'opus';  // OKR 拆解用 Opus
  if (task.task_type === 'dev') return 'opus';  // Dev 用 Opus
  return null;  // 其他用 Sonnet
}

// 修改后
function getModelForTask(task) {
  return null;  // 全部用 Sonnet (default)
}
```

## 成功标准

1. **代码修改**：getModelForTask() 返回 null
2. **版本更新**：1.41.2 → 1.41.3
3. **部署成功**：Brain 重启正常
4. **验证**：Brain 日志不再显示 model=opus
5. **成本**：新任务全部用 Sonnet

## 风险与对策

**风险**：质量可能略降（Sonnet vs Opus）

**对策**：
- Sonnet 4.5 性能已经很强
- 可以监控质量，必要时回滚
- 只是成本优化，不影响核心功能

## 回滚计划

如果质量明显下降：
1. 恢复 Opus 配置
2. 重新部署
3. 考虑混合方案（关键任务用 Opus）

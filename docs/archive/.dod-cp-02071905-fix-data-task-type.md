# DoD: 修复 task_type='data' 数据库约束

## 验收清单

- [x] 创建迁移文件 `017_add_data_task_type.sql`
  - Test: 文件存在且包含 ALTER TABLE 语句
- [ ] 更新 `selfcheck.js` EXPECTED_SCHEMA_VERSION = '017'
  - Test: grep '017' brain/src/selfcheck.js
- [ ] 更新 DEFINITION.md schema 版本
  - Test: grep 'Schema 版本: 017' DEFINITION.md
- [ ] 运行迁移
  - Test: docker exec cecelia-postgres psql -U cecelia -d cecelia -c "SELECT version FROM schema_version"
- [ ] 验证约束包含 'data'
  - Test: docker exec cecelia-postgres psql -U cecelia -d cecelia -c "SELECT check_clause FROM information_schema.check_constraints WHERE constraint_name='tasks_task_type_check'"
- [ ] facts-check 通过
  - Test: node scripts/facts-check.mjs
- [ ] 所有测试通过
  - Test: cd brain && npm test

---
id: prd-cp-02172100-whitelist-task-lifecycle-extend
version: 1.0.0
created: 2026-02-17
updated: 2026-02-17
changelog:
  - 1.0.0: 初始版本
---

## PRD - 扩展白名单：任务生命周期 Actions

**需求来源**: 当前 ACTION_WHITELIST 缺少对任务 PRD 内容的更新、归档和延迟操作，丘脑在以下场景下只能使用 no_action 或 escalate_to_brain：
- 探索任务发现新信息后，需要更新 PRD 内容
- 任务长期未执行需要归档
- 任务需要推迟到特定时间

**功能描述**: 在 thalamus.js ACTION_WHITELIST 和 decision-executor.js actionHandlers 中添加 3 个任务生命周期 actions：
- `update_task_prd`: 更新任务 PRD 内容
- `archive_task`: 归档完成/超期任务
- `defer_task`: 延迟任务到指定时间

**涉及文件**:
- brain/src/thalamus.js（ACTION_WHITELIST 新增 3 个 actions）
- brain/src/decision-executor.js（新增 3 个 action handlers）
- brain/src/__tests__/decision-executor.test.js（新增单元测试验证新 actions 通过白名单校验）
- DEFINITION.md（action_count 同步更新，action 列表同步）
- scripts/facts-check.mjs（预期 action_count 更新）

**成功标准**:
- ACTION_WHITELIST 包含 update_task_prd、archive_task、defer_task（dangerous: false）
- 每个 action 有对应执行逻辑（handler）
- validateDecision 能通过这些新 actions
- 单元测试验证新 actions 通过白名单校验
- facts-check.mjs 通过（action_count 更新）
- DEFINITION.md action_count 字段同步
- version bump (patch)

**非目标**: 不修改现有 action 行为，不添加新 HTTP 端点，不修改 quarantine 底层实现

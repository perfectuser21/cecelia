# DoD: Profile Facts 管理 API

## 验收清单

- [ ] GET /api/brain/profile/facts 返回 facts 列表和 total
  - Test: GET 返回 facts 数组和 total 字段
- [ ] GET 支持 limit/offset/category 过滤
  - Test: category 过滤只返回对应类型
- [ ] POST /api/brain/profile/facts 创建新 fact
  - Test: POST 后 DB 中出现新记录
- [ ] POST 触发 fire-and-forget embedding 生成
  - Test: OPENAI_API_KEY 存在时调用 generateProfileFactEmbeddingAsync
- [ ] PUT /api/brain/profile/facts/:id 更新内容
  - Test: PUT 后 content 更新，embedding 置 NULL
- [ ] DELETE /api/brain/profile/facts/:id 删除
  - Test: DELETE 后 DB 中记录消失
- [ ] POST /api/brain/profile/facts/import 批量导入
  - Test: import 调用 MiniMax 拆解文本并批量插入
- [ ] import 返回 { imported: N, facts: [...] }
  - Test: response body 格式正确
- [ ] 所有端点 user_id 固定为 'owner'
  - Test: 插入记录时 user_id = 'owner'
- [ ] 路由挂在 /api/brain/profile/facts
  - Test: server.js 中有 app.use('/api/brain/profile/facts', profileFactsRoutes)

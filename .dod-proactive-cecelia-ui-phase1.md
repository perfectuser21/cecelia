---
id: dod-proactive-cecelia-ui-phase1
version: 1.0.0
created: 2026-02-26
updated: 2026-02-26
changelog:
  - 1.0.0: 初始版本
---

# DoD: 主动式 Cecelia UI — Phase 1

## 后端

- [ ] **新增 GET /api/brain/inner-life 路由** — 聚合返回：反刍状态(dailyCount/budget/undigested)、反思累积(accumulator/threshold)、最近洞察(memory_stream中[反刍洞察]+[反思洞察])、pending desires 数量
  - Test: 路由返回 200 且包含 rumination/reflection/insights/desires 字段

- [ ] **新增 inner-life 路由文件** — `packages/brain/src/routes/inner-life.js` 独立路由模块，在 server.js 中挂载
  - Test: 路由模块正确导出 Express Router

## 前端

- [ ] **VoiceCard 组件** — 展示 Cecelia 最近的主动表达（desire:expressed + briefing greeting）
  - 数据源：useBriefing + WebSocket DESIRE_EXPRESSED 事件
  - 交互：propose → [同意][换一个]，warn → [处理][知道了]，其他 → 自动展示
  - Test: 组件挂载不报错，显示 briefing greeting

- [ ] **DecisionInbox 组件** — 替代 ActionZone，展示 pending desires + queued tasks
  - 数据源：GET /api/brain/desires?status=pending + tasks?status=queued
  - 操作：acknowledge(批准/了解) + dispatch(派发)
  - 显示计数 badge
  - Test: 组件挂载不报错，空状态时显示"一切就绪"

- [ ] **StatusBar 组件** — 增强 PulseStrip，加入反刍进度和反思累积
  - 数据源：health + inner-life API + WebSocket tick:executed
  - 新指标：反刍 N/10、反思累积 N/30
  - Test: 组件挂载不报错，显示增强指标

- [ ] **CeceliaPage 布局重组** — StatusBar → VoiceCard → DecisionInbox → 三列网格
  - 用新 VoiceCard 和 DecisionInbox 替代现有布局中的位置
  - 保留 AgentMonitor + EventStream

- [ ] **前端 DESIRE_EXPRESSED 事件订阅** — useCeceliaWS 添加 DESIRE_EXPRESSED 常量，CeceliaPage 订阅该事件更新 VoiceCard
  - Test: WS_EVENTS 中包含 DESIRE_EXPRESSED

## 验收标准

1. `cd packages/brain && npm test` 通过
2. `cd apps/dashboard && npm run build` 通过
3. 页面加载后 VoiceCard 显示 briefing 内容
4. 当后端广播 DESIRE_EXPRESSED 时，VoiceCard 实时更新
5. DecisionInbox 显示 pending desires 和 queued tasks，可操作
6. StatusBar 显示反刍和反思指标

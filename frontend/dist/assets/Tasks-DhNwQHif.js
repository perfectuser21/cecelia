import{r as l,j as e,aL as j,_ as je,$ as ve,S as de,R as Ne,aM as _,L as ie,O as ce,ak as Se,aN as De,a4 as Te}from"./index-BhHU9tw7.js";import{D as $e,C as z,P as W}from"./dnd.esm-CArm_qsH.js";import{a as U}from"./client-CnxuPcLV.js";import"./tiny-invariant-BaFNuDhB.js";import"./index-B9ygI19o.js";function Ce(a){const n=document.cookie.match(new RegExp("(^| )"+a+"=([^;]+)"));return n?decodeURIComponent(n[2]):null}function Ee(){const a=Ce("user");if(!a)return null;try{return JSON.parse(a)}catch{return null}}function Ie(){return Ee()}async function Pe(a={}){const{data:n}=await U.get("/tasks",{params:{name:a.name,range:a.range,includeDone:a.includeDone?"true":void 0,includeNoDue:a.includeNoDue?"true":void 0}});if(!n.success)throw new Error(n.error||"Failed to fetch tasks");return n.tasks}async function Re(a,n){const{data:i}=await U.patch(`/tasks/${a}`,{done:n});if(!i.success)throw new Error(i.error||"Failed to update task");return i.task}async function He(a){const{data:n}=await U.post("/tasks",a);if(!n.success)throw new Error(n.error||"Failed to create task");return n.task}const ue=[{name:"ä¸Šåˆ",start:8*60,end:12*60,icon:"â˜€ï¸",gradient:"from-amber-500/20 via-orange-500/10 to-yellow-500/20"},{name:"ä¸‹åˆ",start:13*60+30,end:18*60,icon:"ðŸŒ¤ï¸",gradient:"from-blue-500/20 via-indigo-500/10 to-purple-500/20"}],xe=(()=>{const a=[];return ue.forEach(n=>{for(let i=n.start;i<n.end;i+=15){const g=Math.floor(i/60),f=i%60;a.push({minutes:i,label:`${g.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}`,isHourStart:f===0})}}),a})(),ge={é«˜:{color:"text-rose-600 dark:text-rose-400",bg:"bg-rose-50 dark:bg-rose-900/30",border:"border-rose-200 dark:border-rose-700"},ä¸­:{color:"text-amber-600 dark:text-amber-400",bg:"bg-amber-50 dark:bg-amber-900/30",border:"border-amber-200 dark:border-amber-700"},ä½Ž:{color:"text-sky-600 dark:text-sky-400",bg:"bg-sky-50 dark:bg-sky-900/30",border:"border-sky-200 dark:border-sky-700"}},u=a=>a.toISOString().split("T")[0],C=a=>`${a.getMonth()+1}æœˆ${a.getDate()}æ—¥`,me=a=>["å‘¨æ—¥","å‘¨ä¸€","å‘¨äºŒ","å‘¨ä¸‰","å‘¨å››","å‘¨äº”","å‘¨å…­"][a.getDay()],Le=a=>["æ—¥","ä¸€","äºŒ","ä¸‰","å››","äº”","å…­"][a.getDay()],v=a=>a.getDay()===0||a.getDay()===6,Oe=a=>{const n=a.getDay(),i=new Date(a);return i.setDate(a.getDate()-(n===0?6:n-1)),Array.from({length:7},(g,f)=>{const b=new Date(i);return b.setDate(i.getDate()+f),b})};function Fe(){const a=Ie(),[n,i]=l.useState("day"),[g,f]=l.useState(new Date),[b,E]=l.useState([]),[I,A]=l.useState(!0),[F,J]=l.useState(null),[Me,V]=l.useState(new Set),[N,G]=l.useState(()=>{try{const t=localStorage.getItem("zenithjoy_task_schedule");return t?JSON.parse(t):{}}catch{return{}}}),[S,K]=l.useState(""),[q,B]=l.useState(""),[D,X]=l.useState(!1),[P,Y]=l.useState(!1),[T,$]=l.useState(null),[R,Q]=l.useState(null),[Z,be]=l.useState(new Date),H=l.useRef(null),ee=l.useRef(null),k=l.useCallback((t,r)=>{Q({type:t,message:r}),setTimeout(()=>Q(null),3e3)},[]),p=l.useMemo(()=>Oe(g),[g]),L=n==="day"?[g]:p,te=l.useMemo(()=>{const t=u(new Date),r=u(p[0]),s=u(p[6]),c=b.filter(o=>o.due===t),d=b.filter(o=>o.due?o.due>=r&&o.due<=s:!1);return{today:{total:c.length},week:{total:d.length}}},[b,p]),y=l.useCallback(async()=>{if(a!=null&&a.name){A(!0),J(null);try{const t=await Pe({name:a.name,range:"week",includeDone:!1});E(t)}catch(t){J(t.message||"åŠ è½½å¤±è´¥")}finally{A(!1)}}},[a==null?void 0:a.name]);l.useEffect(()=>{y()},[y]),l.useEffect(()=>{try{localStorage.setItem("zenithjoy_task_schedule",JSON.stringify(N))}catch(t){console.error("Failed to save task schedule:",t)}},[N]),l.useEffect(()=>{const t=()=>be(new Date);t();const r=setInterval(t,6e4);return()=>clearInterval(r)},[]),l.useEffect(()=>{if(H.current&&ee.current){const t=setTimeout(()=>{var r;(r=H.current)==null||r.scrollIntoView({behavior:"smooth",block:"center"})},300);return()=>clearTimeout(t)}},[n,g]),l.useEffect(()=>{const t=r=>{const s=r.target;if(!(s.tagName==="INPUT"||s.tagName==="TEXTAREA"||s.tagName==="SELECT"))switch(r.key.toLowerCase()){case"t":r.preventDefault(),ae();break;case"arrowleft":r.preventDefault(),se();break;case"arrowright":r.preventDefault(),ne();break;case"d":r.preventDefault(),i("day");break;case"w":r.preventDefault(),i("week");break}};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[n,g]);const re=(t,r)=>{const s=u(t);return b.filter(c=>{const d=N[c.id];return d&&d.date===s&&d.minutes===r})},he=t=>{const r=u(t);return b.filter(s=>s.due===r&&!N[s.id])},ae=()=>f(new Date),se=()=>{const t=new Date(g);t.setDate(t.getDate()-(n==="day"?1:7)),f(t)},ne=()=>{const t=new Date(g);t.setDate(t.getDate()+(n==="day"?1:7)),f(t)},fe=async()=>{if(!T)return;const t=T;$(null),E(r=>r.filter(s=>s.id!==t.id)),V(r=>new Set(r).add(t.id));try{await Re(t.id,!0),k("success","å·²å®Œæˆ")}catch{y(),k("error","æ›´æ–°å¤±è´¥")}finally{V(r=>{const s=new Set(r);return s.delete(t.id),s})}},pe=async t=>{if(t.preventDefault(),!(!S.trim()||P)){Y(!0);try{const r=await He({title:S.trim(),due:u(g),assigneeName:(a==null?void 0:a.name)||"",priority:q||void 0,highlight:D});E(s=>[...s,r]),K(""),B(""),X(!1),k("success","å·²åˆ›å»º")}catch{k("error","åˆ›å»ºå¤±è´¥")}finally{Y(!1)}}},ke=async t=>{const{draggableId:r,destination:s}=t;if(!s)return;const[c,d,o]=s.droppableId.split("|");if(c==="unscheduled")G(m=>{const x={...m};return delete x[r],x}),k("success","å·²ç§»é™¤æ—¶é—´å®‰æŽ’");else if(c==="slot"){const m=parseInt(o);if(!isNaN(m)){G(h=>({...h,[r]:{date:d,minutes:m}}));const x=Math.floor(m/60),w=m%60;k("success",`å·²å®‰æŽ’åˆ° ${x.toString().padStart(2,"0")}:${w.toString().padStart(2,"0")}`)}}},ye=({priority:t})=>{if(!t||!ge[t])return null;const r=ge[t];return e.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-semibold rounded-md border ${r.bg} ${r.color} ${r.border}`,children:t})},le=({dateStr:t,slotMinutes:r})=>{const s=oe(),c=u(new Date);if(t!==c||!we())return null;const d=r,o=r+15;if(s<d||s>=o)return null;const m=(s-d)/15*100;return e.jsxs("div",{ref:H,className:"absolute left-0 right-0 z-20 flex items-center pointer-events-none",style:{top:`${m}%`},children:[e.jsx("div",{className:"absolute left-0 w-14 flex items-center justify-end pr-1",children:e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 shadow-lg shadow-red-500/50 animate-pulse"})}),e.jsx("div",{className:"flex-1 h-[2px] bg-red-500 shadow-md shadow-red-500/30 ml-14"})]})},O=({task:t,compact:r=!1})=>e.jsxs("div",{className:`group flex items-center gap-1.5 px-2.5 py-2 rounded-xl border transition-all duration-200 cursor-grab active:cursor-grabbing active:scale-[0.98] ${t.highlight?"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/30 dark:to-orange-900/20 border-amber-200/80 dark:border-amber-700/50 shadow-sm shadow-amber-500/10":"bg-white dark:bg-slate-700/80 border-gray-200/80 dark:border-slate-600/80"} hover:shadow-lg hover:border-gray-300 dark:hover:border-slate-500 hover:-translate-y-0.5`,children:[e.jsx(De,{className:"w-3 h-3 text-gray-300 dark:text-gray-500 flex-shrink-0 opacity-50 group-hover:opacity-100"}),t.highlight&&e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx(_,{className:"w-3.5 h-3.5 text-amber-500 fill-amber-400"}),e.jsx(_,{className:"w-3.5 h-3.5 text-amber-400 fill-amber-400 absolute inset-0 animate-ping opacity-30"})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-1 min-w-0",children:[e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",onClick:s=>s.stopPropagation(),className:`font-medium text-gray-800 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 truncate transition-colors ${r?"text-[11px] max-w-[80px]":"text-sm max-w-[140px]"}`,children:t.title}),e.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",onClick:s=>s.stopPropagation(),className:"flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Te,{className:"w-3 h-3 text-gray-400 hover:text-blue-500 dark:hover:text-blue-400"})})]}),!r&&e.jsx(ye,{priority:t.priority}),e.jsx("button",{onClick:s=>{s.stopPropagation(),$(t)},className:"ml-auto p-1 opacity-0 group-hover:opacity-100 hover:bg-green-100 dark:hover:bg-green-900/40 rounded-lg transition-all duration-200",children:e.jsx(j,{className:"w-3.5 h-3.5 text-gray-400 hover:text-green-500 dark:hover:text-green-400"})})]});if(!(a!=null&&a.name))return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-gray-500",children:"è¯·å…ˆç™»å½•"})});const M=t=>u(t)===u(new Date),oe=()=>{const t=Z.getHours(),r=Z.getMinutes();return t*60+r},we=()=>{const t=oe();return ue.some(r=>t>=r.start&&t<r.end)};return e.jsxs("div",{className:"h-full flex flex-col",children:[T&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>$(null)}),e.jsxs("div",{className:"relative bg-white dark:bg-slate-800 rounded-2xl shadow-2xl p-6 max-w-sm w-full mx-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-14 h-14 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx(j,{className:"w-7 h-7 text-green-500"})})}),e.jsx("h3",{className:"text-lg font-bold text-center text-gray-900 dark:text-white mb-2",children:"å®Œæˆä»»åŠ¡ï¼Ÿ"}),e.jsx("p",{className:"text-center text-gray-600 dark:text-gray-300 mb-1",children:T.title}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>$(null),className:"flex-1 px-4 py-2.5 bg-gray-100 dark:bg-slate-700 text-gray-700 dark:text-gray-300 rounded-xl font-medium",children:"å–æ¶ˆ"}),e.jsxs("button",{onClick:fe,className:"flex-1 px-4 py-2.5 bg-green-500 hover:bg-green-600 text-white rounded-xl font-medium flex items-center justify-center gap-2",children:[e.jsx(j,{className:"w-4 h-4"})," å®Œæˆ"]})]})]})]}),R&&e.jsx("div",{className:`fixed top-4 right-4 z-50 px-4 py-3 rounded-xl shadow-lg flex items-center gap-2 ${R.type==="success"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:R.message}),e.jsxs("div",{className:"flex items-center justify-between mb-4 flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-0.5 bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm rounded-2xl border border-gray-200/60 dark:border-slate-700/60 p-1 shadow-sm",children:[e.jsx("button",{onClick:se,className:"p-2.5 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-xl transition-colors",children:e.jsx(je,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),e.jsx("button",{onClick:ae,className:"px-4 py-2 text-sm font-semibold bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-xl shadow-sm hover:shadow-md transition-all",children:"ä»Šå¤©"}),e.jsx("button",{onClick:ne,className:"p-2.5 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-xl transition-colors",children:e.jsx(ve,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h2",{className:"text-xl font-bold bg-gradient-to-r from-gray-900 via-gray-700 to-gray-900 dark:from-white dark:via-gray-300 dark:to-white bg-clip-text text-transparent",children:n==="day"?`${C(g)} ${me(g)}`:`${C(p[0])} - ${C(p[6])}`}),n==="day"&&v(g)&&e.jsxs("span",{className:"px-2.5 py-1 text-xs font-semibold bg-gradient-to-r from-violet-500 to-purple-500 text-white rounded-full shadow-sm flex items-center gap-1",children:[e.jsx(de,{className:"w-3 h-3"}),"å‘¨æœ«"]})]}),e.jsxs("div",{className:"px-3 py-1.5 bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm rounded-xl border border-gray-200/60 dark:border-slate-700/60 shadow-sm flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"ä»Šæ—¥"}),e.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:te.today.total}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"|"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"æœ¬å‘¨"}),e.jsx("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:te.week.total})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex gap-1 bg-gray-100/80 dark:bg-slate-700/80 backdrop-blur-sm p-1 rounded-xl",children:[e.jsx("button",{onClick:()=>i("day"),className:`px-5 py-2 rounded-lg text-sm font-semibold transition-all duration-200 ${n==="day"?"bg-white dark:bg-slate-600 text-gray-900 dark:text-white shadow-md":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"æ—¥"}),e.jsx("button",{onClick:()=>i("week"),className:`px-5 py-2 rounded-lg text-sm font-semibold transition-all duration-200 ${n==="week"?"bg-white dark:bg-slate-600 text-gray-900 dark:text-white shadow-md":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"å‘¨"})]}),e.jsx("button",{onClick:y,disabled:I,className:"p-2.5 rounded-xl bg-white/80 dark:bg-slate-800/80 border border-gray-200/60 dark:border-slate-700/60 hover:bg-gray-50 dark:hover:bg-slate-700 transition-all shadow-sm",children:e.jsx(Ne,{className:`w-4 h-4 text-gray-500 ${I?"animate-spin":""}`})})]})]}),e.jsx("form",{onSubmit:pe,className:"mb-5",children:e.jsxs("div",{className:"flex gap-2 items-center p-2 bg-white/60 dark:bg-slate-800/60 backdrop-blur-sm rounded-2xl border border-gray-200/60 dark:border-slate-700/60 shadow-sm",children:[e.jsx("input",{type:"text",value:S,onChange:t=>K(t.target.value),placeholder:`âœ¨ æ·»åŠ æ–°ä»»åŠ¡åˆ° ${C(g)}...`,className:"flex-1 px-4 py-2.5 bg-transparent text-sm placeholder:text-gray-400 dark:placeholder:text-gray-500 focus:outline-none"}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("select",{value:q,onChange:t=>B(t.target.value),className:"px-3 py-2 bg-gray-100/80 dark:bg-slate-700/80 border-0 rounded-xl text-sm font-medium focus:outline-none focus:ring-2 focus:ring-blue-500/50 cursor-pointer",children:[e.jsx("option",{value:"",children:"ä¼˜å…ˆçº§"}),e.jsx("option",{value:"é«˜",children:"ðŸ”´ é«˜"}),e.jsx("option",{value:"ä¸­",children:"ðŸŸ¡ ä¸­"}),e.jsx("option",{value:"ä½Ž",children:"ðŸ”µ ä½Ž"})]}),e.jsx("button",{type:"button",onClick:()=>X(!D),className:`p-2.5 rounded-xl transition-all duration-200 ${D?"bg-gradient-to-br from-amber-400 to-orange-500 text-white shadow-md shadow-amber-500/30":"bg-gray-100/80 dark:bg-slate-700/80 text-gray-400 hover:text-amber-500"}`,children:e.jsx(_,{className:`w-4 h-4 ${D?"fill-white":""}`})}),e.jsxs("button",{type:"submit",disabled:!S.trim()||P,className:"px-5 py-2.5 bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white rounded-xl font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 shadow-md shadow-blue-500/30 transition-all duration-200",children:[P?e.jsx(ie,{className:"w-4 h-4 animate-spin"}):e.jsx(ce,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"æ·»åŠ "})]})]})]})}),I?e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx(ie,{className:"w-8 h-8 animate-spin text-blue-500"})}):F?e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Se,{className:"w-10 h-10 text-red-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 mb-4",children:F}),e.jsx("button",{onClick:y,className:"px-4 py-2 bg-blue-500 text-white rounded-lg",children:"é‡è¯•"})]})}):b.length===0?e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"w-24 h-24 mx-auto rounded-full bg-gradient-to-br from-green-400 via-emerald-500 to-teal-500 flex items-center justify-center shadow-2xl shadow-green-500/30",children:e.jsx(j,{className:"w-12 h-12 text-white",strokeWidth:2.5})}),e.jsx("div",{className:"absolute -top-2 -right-8 animate-bounce",children:e.jsx(de,{className:"w-8 h-8 text-yellow-400 fill-yellow-300"})})]}),e.jsx("h3",{className:"text-2xl font-bold bg-gradient-to-r from-green-600 via-emerald-600 to-teal-600 dark:from-green-400 dark:via-emerald-400 dark:to-teal-400 bg-clip-text text-transparent mb-3",children:"å¤ªæ£’äº†ï¼Œä»»åŠ¡éƒ½å®Œæˆäº†ï¼"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mb-6 leading-relaxed",children:["æš‚æ— å¾…åŠžä»»åŠ¡ï¼Œäº«å—ä»Šå¤©çš„ç¾Žå¥½æ—¶å…‰",e.jsx("br",{}),"æˆ–è€…åˆ›å»ºæ–°ä»»åŠ¡å¼€å§‹æ–°çš„å¾ç¨‹"]}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-2xl shadow-lg shadow-blue-500/30 font-medium",children:[e.jsx(ce,{className:"w-5 h-5"}),e.jsx("span",{children:"åœ¨ä¸Šæ–¹å¿«é€Ÿæ·»åŠ ä»»åŠ¡"})]})]})}):e.jsx($e,{onDragEnd:ke,children:e.jsxs("div",{className:"flex-1 flex gap-4 overflow-hidden",children:[e.jsx("div",{className:"w-60 flex-shrink-0",children:e.jsxs("div",{className:"bg-gradient-to-b from-white to-gray-50/50 dark:from-slate-800 dark:to-slate-800/50 rounded-2xl border border-gray-200/60 dark:border-slate-700/60 p-4 h-full overflow-y-auto shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-blue-500 to-indigo-500"}),e.jsx("h3",{className:"text-xs font-bold text-gray-600 dark:text-gray-300 uppercase tracking-wider",children:"å¾…å®‰æŽ’"})]}),L.map(t=>{const r=he(t);if(r.length===0&&n==="week")return null;const s=v(t);return e.jsxs("div",{className:"mb-5 last:mb-0",children:[n==="week"&&e.jsxs("p",{className:`text-xs font-medium mb-2 flex items-center gap-1.5 ${s?"text-violet-500 dark:text-violet-400":"text-gray-500 dark:text-gray-400"}`,children:[s&&e.jsx("span",{className:"text-[10px]",children:"âœ¨"}),me(t)," ",t.getDate(),"æ—¥"]}),e.jsx(z,{droppableId:`unscheduled|${u(t)}|0`,children:(c,d)=>e.jsxs("div",{ref:c.innerRef,...c.droppableProps,className:`space-y-2 min-h-[48px] p-2 -m-2 rounded-xl transition-colors ${d.isDraggingOver?"bg-blue-50/50 dark:bg-blue-900/20":""}`,children:[r.map((o,m)=>e.jsx(W,{draggableId:o.id,index:m,children:x=>e.jsx("div",{ref:x.innerRef,...x.draggableProps,...x.dragHandleProps,children:e.jsx(O,{task:o})})},o.id)),c.placeholder,r.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-4 text-gray-300 dark:text-gray-600",children:[e.jsx(j,{className:"w-5 h-5 mb-1"}),e.jsx("p",{className:"text-[11px]",children:"å…¨éƒ¨å·²å®‰æŽ’"})]})]})})]},u(t))})]})}),e.jsxs("div",{className:"flex-1 bg-gradient-to-b from-white to-gray-50/30 dark:from-slate-800 dark:to-slate-900/30 rounded-2xl border border-gray-200/60 dark:border-slate-700/60 overflow-hidden flex flex-col shadow-sm",children:[n==="week"&&e.jsxs("div",{className:"flex border-b border-gray-200/50 dark:border-slate-700/50 flex-shrink-0 bg-gradient-to-r from-gray-50 via-white to-gray-50 dark:from-slate-800 dark:via-slate-750 dark:to-slate-800",children:[e.jsx("div",{className:"w-14 flex-shrink-0"})," ",p.map(t=>{const r=v(t),s=M(t);return e.jsxs("div",{className:`flex-1 py-3 text-center border-l border-gray-200/50 dark:border-slate-700/50 transition-all ${s?"bg-gradient-to-b from-blue-100 to-blue-50 dark:from-blue-900/40 dark:to-blue-900/20":r?"bg-gradient-to-b from-violet-50 to-purple-50/50 dark:from-violet-900/20 dark:to-purple-900/10":""}`,children:[e.jsxs("p",{className:`text-xs font-medium ${s?"text-blue-600 dark:text-blue-400":r?"text-violet-500 dark:text-violet-400":"text-gray-500 dark:text-gray-400"}`,children:["å‘¨",Le(t)]}),e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s&&e.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500 animate-pulse"}),e.jsx("p",{className:`text-lg font-bold ${s?"text-blue-600 dark:text-blue-400":r?"text-violet-600 dark:text-violet-400":"text-gray-900 dark:text-white"}`,children:t.getDate()})]})]},u(t))})]}),e.jsxs("div",{ref:ee,className:"flex-1 overflow-y-auto relative",children:[e.jsx("div",{className:"sticky top-0 z-10 backdrop-blur-sm bg-gradient-to-r from-amber-100/90 via-orange-50/90 to-yellow-100/90 dark:from-amber-900/50 dark:via-orange-900/40 dark:to-yellow-900/50 px-4 py-2 border-b border-amber-200/50 dark:border-amber-700/30",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-base",children:"â˜€ï¸"}),e.jsx("span",{className:"text-xs font-semibold text-amber-800 dark:text-amber-200",children:"ä¸Šåˆ"}),e.jsx("span",{className:"text-xs text-amber-600/70 dark:text-amber-300/70",children:"8:00 - 12:00"})]})}),xe.filter(t=>t.minutes<12*60).map(t=>e.jsxs("div",{className:`flex border-b ${t.isHourStart?"border-gray-200/60 dark:border-slate-600/60":"border-gray-100/40 dark:border-slate-700/40"}`,children:[e.jsx("div",{className:`w-14 flex-shrink-0 py-1.5 px-2 text-right border-r border-gray-100/50 dark:border-slate-700/50 ${t.isHourStart?"bg-gradient-to-r from-gray-50 to-transparent dark:from-slate-700/30":""}`,children:e.jsx("span",{className:`text-[11px] font-mono ${t.isHourStart?"font-semibold text-gray-700 dark:text-gray-200":"text-gray-400 dark:text-gray-500"}`,children:t.isHourStart?t.label:t.label.split(":")[1]})}),L.map(r=>{const s=v(r),c=M(r),d=u(r);return e.jsx(z,{droppableId:`slot|${d}|${t.minutes}`,children:(o,m)=>e.jsxs("div",{ref:o.innerRef,...o.droppableProps,className:`flex-1 min-h-[32px] p-0.5 flex flex-wrap gap-0.5 items-start border-l border-gray-100/50 dark:border-slate-700/50 transition-all duration-200 relative ${m.isDraggingOver?"bg-blue-100 dark:bg-blue-900/40 ring-2 ring-inset ring-blue-400/50":c?"bg-blue-50/50 dark:bg-blue-900/20":s?"bg-violet-50/30 dark:bg-violet-900/10":"hover:bg-gray-50/50 dark:hover:bg-slate-700/30"}`,children:[re(r,t.minutes).map((x,w)=>e.jsx(W,{draggableId:x.id,index:w,children:h=>e.jsx("div",{ref:h.innerRef,...h.draggableProps,...h.dragHandleProps,children:e.jsx(O,{task:x,compact:n==="week"})})},x.id)),o.placeholder,e.jsx(le,{dateStr:d,slotMinutes:t.minutes})]})},`${d}-${t.minutes}`)})]},t.minutes)),e.jsxs("div",{className:"bg-gradient-to-r from-gray-100 via-gray-50 to-gray-100 dark:from-slate-700/60 dark:via-slate-600/40 dark:to-slate-700/60 px-4 py-3 flex items-center justify-center gap-2 border-y border-gray-200/50 dark:border-slate-600/50",children:[e.jsx("span",{className:"text-lg",children:"ðŸ½ï¸"}),e.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"åˆä¼‘æ—¶é—´"}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500",children:"12:00 - 13:30"})]}),e.jsx("div",{className:"sticky top-0 z-10 backdrop-blur-sm bg-gradient-to-r from-blue-100/90 via-indigo-50/90 to-sky-100/90 dark:from-blue-900/50 dark:via-indigo-900/40 dark:to-sky-900/50 px-4 py-2 border-b border-blue-200/50 dark:border-blue-700/30",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-base",children:"ðŸŒ¤ï¸"}),e.jsx("span",{className:"text-xs font-semibold text-blue-800 dark:text-blue-200",children:"ä¸‹åˆ"}),e.jsx("span",{className:"text-xs text-blue-600/70 dark:text-blue-300/70",children:"13:30 - 18:00"})]})}),xe.filter(t=>t.minutes>=13*60+30).map(t=>e.jsxs("div",{className:`flex border-b ${t.isHourStart?"border-gray-200/60 dark:border-slate-600/60":"border-gray-100/40 dark:border-slate-700/40"}`,children:[e.jsx("div",{className:`w-14 flex-shrink-0 py-1.5 px-2 text-right border-r border-gray-100/50 dark:border-slate-700/50 ${t.isHourStart?"bg-gradient-to-r from-gray-50 to-transparent dark:from-slate-700/30":""}`,children:e.jsx("span",{className:`text-[11px] font-mono ${t.isHourStart?"font-semibold text-gray-700 dark:text-gray-200":"text-gray-400 dark:text-gray-500"}`,children:t.isHourStart?t.label:t.label.split(":")[1]})}),L.map(r=>{const s=v(r),c=M(r),d=u(r);return e.jsx(z,{droppableId:`slot|${d}|${t.minutes}`,children:(o,m)=>e.jsxs("div",{ref:o.innerRef,...o.droppableProps,className:`flex-1 min-h-[32px] p-0.5 flex flex-wrap gap-0.5 items-start border-l border-gray-100/50 dark:border-slate-700/50 transition-all duration-200 relative ${m.isDraggingOver?"bg-blue-100 dark:bg-blue-900/40 ring-2 ring-inset ring-blue-400/50":c?"bg-blue-50/50 dark:bg-blue-900/20":s?"bg-violet-50/30 dark:bg-violet-900/10":"hover:bg-gray-50/50 dark:hover:bg-slate-700/30"}`,children:[re(r,t.minutes).map((x,w)=>e.jsx(W,{draggableId:x.id,index:w,children:h=>e.jsx("div",{ref:h.innerRef,...h.draggableProps,...h.dragHandleProps,children:e.jsx(O,{task:x,compact:n==="week"})})},x.id)),o.placeholder,e.jsx(le,{dateStr:d,slotMinutes:t.minutes})]})},`${d}-${t.minutes}`)})]},t.minutes))]})]})]})})]})}export{Fe as default};

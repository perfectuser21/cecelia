import{r as a,j as e,ak as K,t as Y,aY as Q,aZ as V,aN as Z,Y as W,a_ as X,a$ as O,b0 as U,b1 as ee,b2 as te,b3 as se,aA as ae,b4 as re,L as le,O as ne,al as ie,am as oe,aU as ce,aO as R,_ as de,R as F,ao as xe,n as ue,$ as me,aQ as he,aE as S,e as T,a9 as A,F as pe}from"./index-BhHU9tw7.js";import{D as ge,C as be,P as fe}from"./dnd.esm-CArm_qsH.js";import"./tiny-invariant-BaFNuDhB.js";function je(t,d){const[o,l]=a.useState([]),[h,n]=a.useState(!0),[c,p]=a.useState(null),m=a.useCallback(async()=>{if(!d){l([]),n(!1);return}try{n(!0);const r=await fetch(`/api/brain/blocks/${t}/${d}`);if(!r.ok)throw new Error("Failed to fetch blocks");const b=await r.json();l(b.blocks||[]),p(null)}catch(r){console.error("Failed to fetch blocks:",r),p(r instanceof Error?r.message:"Unknown error"),l([])}finally{n(!1)}},[t,d]);a.useEffect(()=>{m()},[m]);const f=a.useCallback(async(r,b={})=>{try{const x=await fetch("/api/brain/blocks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({parent_id:d,parent_type:t,type:r,content:b})});if(!x.ok)throw new Error("Failed to create block");const s=await x.json();return s.success&&s.block?(l(u=>[...u,s.block]),s.block):null}catch(x){return console.error("Failed to create block:",x),null}},[d,t]),g=a.useCallback(async(r,b)=>{try{const x=await fetch(`/api/brain/blocks/${r}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:b})});if(!x.ok)throw new Error("Failed to update block");const s=await x.json();return s.success&&s.block?(l(u=>u.map(v=>v.id===r?s.block:v)),!0):!1}catch(x){return console.error("Failed to update block:",x),!1}},[]),k=a.useCallback(async r=>{try{if(!(await fetch(`/api/brain/blocks/${r}`,{method:"DELETE"})).ok)throw new Error("Failed to delete block");return l(x=>x.filter(s=>s.id!==r)),!0}catch(b){return console.error("Failed to delete block:",b),!1}},[]),j=a.useCallback(async r=>{try{const b=r.map((s,u)=>({id:s,order_index:u}));if(!(await fetch("/api/brain/blocks/reorder",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({blocks:b})})).ok)throw new Error("Failed to reorder blocks");return l(s=>{const u=new Map(s.map(v=>[v.id,v]));return r.map((v,N)=>{const w=u.get(v);return w?{...w,order_index:N}:null}).filter(v=>v!==null)}),!0}catch(b){return console.error("Failed to reorder blocks:",b),!1}},[]);return{blocks:o,loading:h,error:c,createBlock:f,updateBlock:g,deleteBlock:k,reorderBlocks:j,refresh:m}}function ke({block:t,onUpdate:d,readOnly:o}){const[l,h]=a.useState(!1),[n,c]=a.useState(t.content.text||""),p=a.useRef(null);a.useEffect(()=>{c(t.content.text||"")},[t.content.text]),a.useEffect(()=>{l&&p.current&&(p.current.focus(),p.current.setSelectionRange(n.length,n.length))},[l,n.length]);const m=()=>{h(!1),n!==t.content.text&&d({...t.content,text:n})},f=g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),m()),g.key==="Escape"&&(c(t.content.text||""),h(!1))};return o?e.jsx("p",{className:"text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:n||e.jsx("span",{className:"text-slate-400 italic",children:"Empty"})}):l?e.jsx("textarea",{ref:p,value:n,onChange:g=>c(g.target.value),onBlur:m,onKeyDown:f,className:"w-full bg-transparent border-none outline-none resize-none text-slate-700 dark:text-slate-300",rows:Math.max(1,n.split(`
`).length),placeholder:"Type something..."}):e.jsx("div",{onClick:()=>h(!0),className:"cursor-text min-h-[1.5em] text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:n||e.jsx("span",{className:"text-slate-400 italic",children:"Click to edit..."})})}function ve({block:t,onUpdate:d,readOnly:o}){const[l,h]=a.useState(!1),[n,c]=a.useState(t.content.text||""),p=a.useRef(null),m=t.content.level||1;a.useEffect(()=>{c(t.content.text||"")},[t.content.text]),a.useEffect(()=>{l&&p.current&&p.current.focus()},[l]);const f=()=>{h(!1),n!==t.content.text&&d({...t.content,text:n})},g=r=>{r.key==="Enter"&&(r.preventDefault(),f()),r.key==="Escape"&&(c(t.content.text||""),h(!1))},j=`${{1:"text-2xl font-bold",2:"text-xl font-semibold",3:"text-lg font-medium"}[m]} text-slate-900 dark:text-white`;return o?e.jsx("div",{className:j,children:n||e.jsx("span",{className:"text-slate-400 italic",children:"Empty heading"})}):l?e.jsx("input",{ref:p,type:"text",value:n,onChange:r=>c(r.target.value),onBlur:f,onKeyDown:g,className:`w-full bg-transparent border-none outline-none ${j}`,placeholder:`Heading ${m}`}):e.jsx("div",{onClick:()=>h(!0),className:`cursor-text ${j}`,children:n||e.jsx("span",{className:"text-slate-400 italic",children:"Click to add heading..."})})}function Ne({block:t,onUpdate:d,readOnly:o}){const l=t.content.items||[""],h=t.content.listType||"bullet",[n,c]=a.useState(null),[p,m]=a.useState(""),f=a.useRef(null);a.useEffect(()=>{n!==null&&f.current&&f.current.focus()},[n]);const g=x=>{o||(c(x),m(l[x]||""))},k=()=>{if(n===null)return;const x=[...l];x[n]=p,d({...t.content,items:x.filter(s=>s.trim()!=="")}),c(null)},j=(x,s)=>{if(x.key==="Enter"){x.preventDefault();const u=[...l];u[s]=p,u.splice(s+1,0,""),d({...t.content,items:u}),c(s+1),m("")}if(x.key==="Backspace"&&p===""&&l.length>1){x.preventDefault();const u=l.filter((v,N)=>N!==s);d({...t.content,items:u}),c(s>0?s-1:null),m(s>0?l[s-1]:"")}x.key==="Escape"&&c(null)},r=h==="numbered"?"ol":"ul",b=h==="numbered"?"list-decimal list-inside":"list-disc list-inside";return e.jsxs(r,{className:`${b} text-slate-700 dark:text-slate-300 space-y-1`,children:[l.map((x,s)=>e.jsx("li",{className:"pl-1",children:n===s?e.jsx("input",{ref:f,type:"text",value:p,onChange:u=>m(u.target.value),onBlur:k,onKeyDown:u=>j(u,s),className:"bg-transparent border-none outline-none w-[calc(100%-1.5em)]",placeholder:"List item..."}):e.jsx("span",{onClick:()=>g(s),className:o?"":"cursor-text",children:x||e.jsx("span",{className:"text-slate-400 italic",children:"Empty item"})})},s)),!o&&n===null&&e.jsx("li",{className:"pl-1 text-slate-400 cursor-pointer hover:text-slate-600 dark:hover:text-slate-300",onClick:()=>{const x=[...l,""];d({...t.content,items:x}),c(x.length-1),m("")},children:"+ Add item"})]})}function we({block:t,onUpdate:d,readOnly:o}){const[l,h]=a.useState(!1),[n,c]=a.useState(t.content.text||""),[p,m]=a.useState(t.content.language||"plaintext"),f=a.useRef(null);a.useEffect(()=>{c(t.content.text||""),m(t.content.language||"plaintext")},[t.content.text,t.content.language]),a.useEffect(()=>{l&&f.current&&f.current.focus()},[l]);const g=()=>{h(!1),(n!==t.content.text||p!==t.content.language)&&d({...t.content,text:n,language:p})},k=r=>{if(r.key==="Escape"&&(c(t.content.text||""),m(t.content.language||"plaintext"),h(!1)),r.key==="Tab"){r.preventDefault();const b=f.current;if(b){const x=b.selectionStart,s=b.selectionEnd,u=n.substring(0,x)+"  "+n.substring(s);c(u),setTimeout(()=>{b.selectionStart=b.selectionEnd=x+2},0)}}},j=["plaintext","javascript","typescript","python","bash","json","sql","css","html"];return e.jsxs("div",{className:"rounded-lg overflow-hidden border border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"flex items-center justify-between px-3 py-1.5 bg-slate-100 dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700",children:o?e.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:p}):e.jsx("select",{value:p,onChange:r=>{m(r.target.value),d({...t.content,text:n,language:r.target.value})},className:"text-xs bg-transparent border-none outline-none text-slate-600 dark:text-slate-400 cursor-pointer",children:j.map(r=>e.jsx("option",{value:r,children:r},r))})}),e.jsx("div",{className:"p-3 bg-slate-50 dark:bg-slate-900",children:l?e.jsx("textarea",{ref:f,value:n,onChange:r=>c(r.target.value),onBlur:g,onKeyDown:k,className:"w-full bg-transparent border-none outline-none resize-none font-mono text-sm text-slate-800 dark:text-slate-200",rows:Math.max(3,n.split(`
`).length),placeholder:"// Code here..."}):e.jsx("pre",{onClick:()=>!o&&h(!0),className:`font-mono text-sm text-slate-800 dark:text-slate-200 whitespace-pre-wrap ${o?"":"cursor-text"}`,children:n||e.jsx("span",{className:"text-slate-400 italic",children:"Click to add code..."})})})]})}const ye={info:{bg:"bg-blue-50 dark:bg-blue-900/20",border:"border-blue-200 dark:border-blue-800",icon:V,iconColor:"text-blue-500"},warning:{bg:"bg-amber-50 dark:bg-amber-900/20",border:"border-amber-200 dark:border-amber-800",icon:Q,iconColor:"text-amber-500"},success:{bg:"bg-emerald-50 dark:bg-emerald-900/20",border:"border-emerald-200 dark:border-emerald-800",icon:Y,iconColor:"text-emerald-500"},error:{bg:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",icon:K,iconColor:"text-red-500"}};function Ce({block:t,onUpdate:d,readOnly:o}){const[l,h]=a.useState(!1),[n,c]=a.useState(t.content.text||""),p=t.content.variant||"info",m=a.useRef(null);a.useEffect(()=>{c(t.content.text||"")},[t.content.text]),a.useEffect(()=>{l&&m.current&&m.current.focus()},[l]);const f=()=>{h(!1),n!==t.content.text&&d({...t.content,text:n})},g=r=>{r.key==="Escape"&&(c(t.content.text||""),h(!1))},k=ye[p],j=k.icon;return e.jsx("div",{className:`rounded-lg p-4 border ${k.bg} ${k.border}`,children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"flex-shrink-0 pt-0.5",children:o?e.jsx(j,{className:`w-5 h-5 ${k.iconColor}`}):e.jsxs("select",{value:p,onChange:r=>d({...t.content,variant:r.target.value}),className:"appearance-none bg-transparent border-none outline-none cursor-pointer",title:"Change callout type",children:[e.jsx("option",{value:"info",children:"ℹ️"}),e.jsx("option",{value:"warning",children:"⚠️"}),e.jsx("option",{value:"success",children:"✅"}),e.jsx("option",{value:"error",children:"❌"})]})}),e.jsx("div",{className:"flex-1 min-w-0",children:l?e.jsx("textarea",{ref:m,value:n,onChange:r=>c(r.target.value),onBlur:f,onKeyDown:g,className:"w-full bg-transparent border-none outline-none resize-none text-slate-700 dark:text-slate-300",rows:Math.max(1,n.split(`
`).length),placeholder:"Callout text..."}):e.jsx("div",{onClick:()=>!o&&h(!0),className:`text-slate-700 dark:text-slate-300 whitespace-pre-wrap ${o?"":"cursor-text"}`,children:n||e.jsx("span",{className:"text-slate-400 italic",children:"Click to add callout text..."})})})]})})}function Ee({block:t,onUpdate:d,onDelete:o,readOnly:l,dragHandleProps:h}){const n=()=>{switch(t.type){case"text":return e.jsx(ke,{block:t,onUpdate:d,readOnly:l});case"heading":return e.jsx(ve,{block:t,onUpdate:d,readOnly:l});case"list":return e.jsx(Ne,{block:t,onUpdate:d,readOnly:l});case"code":return e.jsx(we,{block:t,onUpdate:d,readOnly:l});case"callout":return e.jsx(Ce,{block:t,onUpdate:d,readOnly:l});default:return e.jsxs("div",{className:"text-slate-400",children:["Unknown block type: ",t.type]})}};return e.jsxs("div",{className:"group flex items-start gap-2 py-1 -ml-8 pl-8 hover:bg-slate-50 dark:hover:bg-slate-800/50 rounded-lg transition-colors",children:[!l&&e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity -ml-7",children:[e.jsx("button",{...h,className:"p-1 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 cursor-grab active:cursor-grabbing",title:"Drag to reorder",children:e.jsx(Z,{className:"w-4 h-4"})}),e.jsx("button",{onClick:o,className:"p-1 text-slate-400 hover:text-red-500 transition-colors",title:"Delete block",children:e.jsx(W,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"flex-1 min-w-0",children:n()})]})}const Pe=[{type:"text",label:"Text",description:"Plain text paragraph",icon:X,defaultContent:{text:""}},{type:"heading",label:"Heading 1",description:"Large section heading",icon:O,defaultContent:{text:"",level:1}},{type:"heading",label:"Heading 2",description:"Medium section heading",icon:U,defaultContent:{text:"",level:2}},{type:"heading",label:"Heading 3",description:"Small section heading",icon:ee,defaultContent:{text:"",level:3}},{type:"list",label:"Bullet List",description:"Unordered list",icon:te,defaultContent:{items:[""],listType:"bullet"}},{type:"list",label:"Numbered List",description:"Ordered list",icon:se,defaultContent:{items:[""],listType:"numbered"}},{type:"code",label:"Code",description:"Code block with syntax",icon:ae,defaultContent:{text:"",language:"plaintext"}},{type:"callout",label:"Callout",description:"Highlighted info box",icon:re,defaultContent:{text:"",variant:"info"}}];function Be({onSelect:t,onClose:d}){return e.jsxs("div",{className:"absolute z-50 mt-1 w-64 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 py-2 max-h-80 overflow-y-auto",children:[e.jsx("div",{className:"px-3 py-1 text-xs font-medium text-slate-400 uppercase tracking-wider",children:"Add block"}),Pe.map((o,l)=>e.jsxs("button",{onClick:()=>{t(o.type,o.defaultContent),d()},className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors text-left",children:[e.jsx("div",{className:"p-1.5 bg-slate-100 dark:bg-slate-700 rounded",children:e.jsx(o.icon,{className:"w-4 h-4 text-slate-600 dark:text-slate-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-white",children:o.label}),e.jsx("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:o.description})]})]},`${o.type}-${l}`))]})}function Se({parentType:t,parentId:d,readOnly:o=!1}){const{blocks:l,loading:h,error:n,createBlock:c,updateBlock:p,deleteBlock:m,reorderBlocks:f}=je(t,d),[g,k]=a.useState(!1),j=a.useCallback(s=>{if(!s.destination||s.source.index===s.destination.index)return;const u=Array.from(l),[v]=u.splice(s.source.index,1);u.splice(s.destination.index,0,v);const N=u.map(w=>w.id);f(N)},[l,f]),r=a.useCallback(async(s,u)=>{await c(s,u)},[c]),b=a.useCallback(s=>u=>{p(s,u)},[p]),x=a.useCallback(s=>()=>{m(s)},[m]);return h?e.jsxs("div",{className:"flex items-center justify-center py-8 text-slate-400",children:[e.jsx(le,{className:"w-5 h-5 animate-spin mr-2"}),"Loading..."]}):n?e.jsxs("div",{className:"py-4 px-3 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg text-sm",children:["Error loading blocks: ",n]}):e.jsxs("div",{className:"block-editor pl-8",children:[e.jsx(ge,{onDragEnd:j,children:e.jsx(be,{droppableId:"blocks",children:s=>e.jsxs("div",{ref:s.innerRef,...s.droppableProps,className:"space-y-1",children:[l.map((u,v)=>e.jsx(fe,{draggableId:u.id,index:v,isDragDisabled:o,children:(N,w)=>e.jsx("div",{ref:N.innerRef,...N.draggableProps,className:w.isDragging?"opacity-50":"",children:e.jsx(Ee,{block:u,onUpdate:b(u.id),onDelete:x(u.id),readOnly:o,dragHandleProps:N.dragHandleProps??void 0})})},u.id)),s.placeholder]})})}),!o&&e.jsxs("div",{className:"relative mt-2",children:[e.jsxs("button",{onClick:()=>k(!g),className:"flex items-center gap-2 px-3 py-2 text-sm text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors",children:[e.jsx(ne,{className:"w-4 h-4"}),"Add block"]}),g&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>k(!1)}),e.jsx(Be,{onSelect:r,onClose:()=>k(!1)})]})]}),l.length===0&&!o&&e.jsxs("div",{className:"py-8 text-center text-slate-400",children:[e.jsx("p",{className:"text-sm",children:"No content yet"}),e.jsx("p",{className:"text-xs mt-1",children:'Click "Add block" to start adding content'})]})]})}function _({status:t}){const d=t==="active"||t==="in_progress"?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":t==="completed"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400":t==="pending"||t==="queued"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":"bg-slate-100 text-slate-600 dark:bg-slate-700 dark:text-slate-400";return e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${d}`,children:t})}function L({priority:t}){const d=t==="P0"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":t==="P1"?"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400":"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-400";return e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${d}`,children:t})}function Te({status:t}){switch(t){case"completed":return e.jsx(A,{className:"w-4 h-4 text-emerald-500"});case"in_progress":return e.jsx(T,{className:"w-4 h-4 text-blue-500"});case"cancelled":return e.jsx(K,{className:"w-4 h-4 text-red-500"});default:return e.jsx(T,{className:"w-4 h-4 text-slate-400"})}}function Fe(){const{projectId:t}=ie(),d=oe(),[o,l]=a.useState(null),[h,n]=a.useState(null),[c,p]=a.useState([]),[m,f]=a.useState(!0),[g,k]=a.useState("all"),[j,r]=a.useState("all"),b=a.useRef(()=>{}),x=a.useCallback(i=>{(i==="all"||i==="pending"||i==="in_progress"||i==="completed")&&k(i)},[]),s=a.useCallback(i=>{(i==="all"||i==="P0"||i==="P1"||i==="P2")&&r(i)},[]),u=a.useMemo(()=>({refresh:()=>b.current(),setFilter:(i,y)=>{i==="status"&&x(y),i==="priority"&&s(y)},setFilter_status:(i,y)=>x(y),setFilter_priority:(i,y)=>s(y),goBack:()=>d("/projects"),goToOkr:()=>d("/okr")}),[x,s,d]),{register:v,unregisterPage:N}=ce("project-detail",o?`Project: ${o.name}`:"Project Detail",()=>({project:o,linkedGoal:h,tasks:c}),()=>({statusFilter:g,priorityFilter:j,loading:m}),u,()=>{if(!o)return"Loading project...";const i=c.filter(C=>C.status==="pending"||C.status==="queued").length,y=c.filter(C=>C.status==="in_progress").length,B=c.filter(C=>C.status==="completed").length;return`${o.name} - ${c.length} tasks (${i} pending, ${y} active, ${B} done)`});a.useEffect(()=>(v(),()=>N()),[v,N,o,h,c,g,j,m]);const w=a.useCallback(async()=>{if(t)try{const[i,y,B]=await Promise.all([fetch("/api/tasks/projects"),fetch("/api/tasks/goals"),fetch("/api/tasks/tasks?limit=100")]),[C,z,q]=await Promise.all([i.json(),y.json(),B.json()]),E=C.find(P=>P.id===t);if(l(E||null),E!=null&&E.goal_id){const P=z.find(J=>J.id===E.goal_id);n(P||null)}const G=q.filter(P=>P.project_id===t);p(G)}catch(i){console.error("Failed to fetch data:",i)}finally{f(!1)}},[t]);a.useEffect(()=>{w()},[w]);const D=()=>{f(!0),w()};b.current=D;const $=c.filter(i=>!(g!=="all"&&i.status!==g||j!=="all"&&i.priority!==j)),I=c.filter(i=>i.status==="pending"||i.status==="queued").length,H=c.filter(i=>i.status==="in_progress").length,M=c.filter(i=>i.status==="completed").length;return m?e.jsxs("div",{className:"space-y-6 animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-slate-200 dark:bg-slate-700 rounded-lg"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-6 bg-slate-200 dark:bg-slate-700 rounded w-1/3 mb-2"}),e.jsx("div",{className:"h-4 bg-slate-200 dark:bg-slate-700 rounded w-1/4"})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3].map(i=>e.jsx("div",{className:"h-24 bg-slate-200 dark:bg-slate-700 rounded-xl"},i))})]}):o?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>d("/projects"),className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:e.jsx(de,{className:"w-5 h-5 text-slate-500"})}),e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl",children:e.jsx(R,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:o.name}),o.description&&e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:o.description})]}),e.jsx(_,{status:o.status})]}),e.jsx("button",{onClick:D,disabled:m,className:"p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors disabled:opacity-50",children:e.jsx(F,{className:`w-5 h-5 text-slate-500 ${m?"animate-spin":""}`})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h&&e.jsxs(xe,{to:"/okr",className:"bg-gradient-to-r from-violet-500/10 to-purple-500/10 dark:from-violet-500/20 dark:to-purple-500/20 rounded-xl p-4 border border-violet-200 dark:border-violet-800 hover:border-violet-400 dark:hover:border-violet-600 transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(ue,{className:"w-5 h-5 text-violet-600 dark:text-violet-400"}),e.jsx("span",{className:"text-sm font-medium text-violet-700 dark:text-violet-300",children:"Part of OKR"}),e.jsx(me,{className:"w-4 h-4 text-violet-400 ml-auto group-hover:translate-x-1 transition-transform"})]}),e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white",children:h.title}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 text-sm",children:[e.jsx(L,{priority:h.priority}),e.jsxs("span",{className:"text-violet-600 dark:text-violet-400",children:[h.progress,"% complete"]})]})]}),o.repo_path&&e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(he,{className:"w-5 h-5 text-slate-500"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Repository"})]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 font-mono truncate",children:o.repo_path})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg",children:e.jsx(S,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:c.length}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Total Tasks"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/30 rounded-lg",children:e.jsx(T,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:I}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Pending"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(F,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:H}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"In Progress"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg",children:e.jsx(A,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:M}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Completed"})]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(pe,{className:"w-5 h-5 text-slate-500"}),e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Project Notes"})]}),e.jsx(Se,{parentType:"project",parentId:t||""})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Tasks"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:g,onChange:i=>k(i.target.value),className:"px-3 py-1.5 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-slate-700 dark:text-slate-300",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsxs("select",{value:j,onChange:i=>r(i.target.value),className:"px-3 py-1.5 text-sm bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-slate-700 dark:text-slate-300",children:[e.jsx("option",{value:"all",children:"All Priority"}),e.jsx("option",{value:"P0",children:"P0"}),e.jsx("option",{value:"P1",children:"P1"}),e.jsx("option",{value:"P2",children:"P2"})]})]})]}),c.length===0?e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-xl p-8 text-center border border-slate-200 dark:border-slate-700",children:[e.jsx(S,{className:"w-12 h-12 text-slate-300 dark:text-slate-600 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No tasks in this project"})]}):$.length===0?e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-xl p-8 text-center border border-slate-200 dark:border-slate-700",children:[e.jsx(S,{className:"w-12 h-12 text-slate-300 dark:text-slate-600 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No tasks match the current filters"})]}):e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 divide-y divide-slate-100 dark:divide-slate-700",children:$.map(i=>e.jsx("div",{className:"p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Te,{status:i.status}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-slate-900 dark:text-white truncate",children:i.title}),i.description&&e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 line-clamp-1",children:i.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{priority:i.priority}),e.jsx(_,{status:i.status})]})]})},i.id))})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(R,{className:"w-12 h-12 text-slate-300 dark:text-slate-600 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Project not found"}),e.jsx("button",{onClick:()=>d("/projects"),className:"mt-4 text-blue-600 hover:text-blue-700 dark:text-blue-400",children:"Back to Projects"})]})}export{Fe as default};

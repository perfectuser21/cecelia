import{r,j as e,aR as F,Z as k,ak as R,v as I,W as B,a5 as m,X as d}from"./index-BhHU9tw7.js";import{R as D,X as G,Y as T,B as A,F as L}from"./generateCategoricalChart-DU228K-S.js";import{B as $}from"./BarChart-D9lHuDtL.js";import"./tiny-invariant-BaFNuDhB.js";const O=[];function X(){return{total:0,byCategory:{},byStatus:{},byPriority:{}}}function E(i){return[]}function N(i){return[]}const c={Foundation:"#3b82f6",Business:"#10b981",Platform:"#8b5cf6",P0:"#ef4444",P1:"#f59e0b",P2:"#10b981",P3:"#6b7280",done:"#10b981","in-progress":"#f59e0b",planned:"#6b7280"};function J(){const[i,f]=r.useState(""),[x,v]=r.useState([]),[h,K]=r.useState([]),[p,M]=r.useState([]),[u,Y]=r.useState([]),[y,Z]=r.useState(null),[j,z]=r.useState(null),[g,w]=r.useState(!1),[a,b]=r.useState(null),[n,o]=r.useState("category"),t=X(),C=r.useMemo(()=>O.filter(s=>{if(i){const l=i.toLowerCase();if(!s.id.toLowerCase().includes(l)&&!s.name.toLowerCase().includes(l)&&!s.description.toLowerCase().includes(l))return!1}return!(!g&&!s.instances.includes("core")||x.length>0&&!x.includes(s.category)||h.length>0&&!s.instances.some(l=>h.includes(l))||p.length>0&&!p.includes(s.priority)||u.length>0&&!u.includes(s.status)||y!==null&&s.hasRci!==y||j!==null&&s.hasGoldenPath!==j)}),[i,x,h,p,u,y,j,g]),P=r.useMemo(()=>n==="category"?[{name:"Foundation",value:t.byCategory.Foundation},{name:"Business",value:t.byCategory.Business},{name:"Platform",value:t.byCategory.Platform}]:n==="instance"?[{name:"Autopilot",value:t.byInstance.autopilot},{name:"Core",value:t.byInstance.core},{name:"Both",value:t.byInstance.both}]:n==="priority"?[{name:"P0",value:t.byPriority.P0},{name:"P1",value:t.byPriority.P1},{name:"P2",value:t.byPriority.P2}]:[{name:"Done",value:t.byStatus.done},{name:"In Progress",value:t.byStatus["in-progress"]}],[n,t]);return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Features Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"管理和监控所有 Features 的状态和统计"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg p-6 shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Features"}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:t.total})]}),e.jsx(F,{className:"w-12 h-12 text-blue-500 opacity-20"})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Sub-features"}),e.jsx("p",{className:"text-3xl font-bold mt-2",children:t.subFeaturesTotal})]}),e.jsx(k,{className:"w-12 h-12 text-green-500 opacity-20"})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"RCI Coverage"}),e.jsxs("p",{className:"text-3xl font-bold mt-2",children:[t.rciCoverage,"% ",e.jsxs("span",{className:"text-base text-gray-600",children:["(",t.withRci,"/",t.total,")"]})]})]}),e.jsx(R,{className:"w-12 h-12 text-orange-500 opacity-20"})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Golden Path Coverage"}),e.jsxs("p",{className:"text-3xl font-bold mt-2",children:[t.goldenPathCoverage,"%"," ",e.jsxs("span",{className:"text-base text-gray-600",children:["(",t.withGoldenPath,"/",t.total,")"]})]})]}),e.jsx(I,{className:"w-12 h-12 text-purple-500 opacity-20"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow",children:[e.jsxs("div",{className:"flex space-x-4 border-b mb-4",children:[e.jsx("button",{onClick:()=>o("category"),className:`px-4 py-2 border-b-2 transition-colors ${n==="category"?"border-blue-500 text-blue-600":"border-transparent text-gray-600"}`,children:"按层级"}),e.jsx("button",{onClick:()=>o("instance"),className:`px-4 py-2 border-b-2 transition-colors ${n==="instance"?"border-blue-500 text-blue-600":"border-transparent text-gray-600"}`,children:"按实例"}),e.jsx("button",{onClick:()=>o("priority"),className:`px-4 py-2 border-b-2 transition-colors ${n==="priority"?"border-blue-500 text-blue-600":"border-transparent text-gray-600"}`,children:"按优先级"}),e.jsx("button",{onClick:()=>o("status"),className:`px-4 py-2 border-b-2 transition-colors ${n==="status"?"border-blue-500 text-blue-600":"border-transparent text-gray-600"}`,children:"按状态"})]}),e.jsx(D,{width:"100%",height:300,children:e.jsxs($,{data:P,children:[e.jsx(G,{dataKey:"name"}),e.jsx(T,{}),e.jsx(A,{}),e.jsx(L,{dataKey:"value",fill:"#3b82f6"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(B,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"搜索 Features...",value:i,onChange:s=>f(s.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:g,onChange:s=>w(s.target.checked),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"显示所有实例"})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["Foundation","Business","Platform"].map(s=>e.jsx("button",{onClick:()=>v(l=>l.includes(s)?l.filter(S=>S!==s):[...l,s]),className:`px-3 py-1 rounded text-sm ${x.includes(s)?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:s},s))})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Instance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Priority"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"RCI"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"GP"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:C.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.id}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded",style:{backgroundColor:c[s.category]+"20",color:c[s.category]},children:s.category})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex gap-1",children:s.instances.map(l=>e.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-700 rounded",children:l},l))})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded",style:{backgroundColor:c[s.priority]+"20",color:c[s.priority]},children:s.priority})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded",style:{backgroundColor:c[s.status]+"20",color:c[s.status]},children:s.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:s.hasRci?e.jsx(m,{className:"w-5 h-5 text-green-500 inline"}):e.jsx(d,{className:"w-5 h-5 text-gray-300 inline"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:s.hasGoldenPath?e.jsx(m,{className:"w-5 h-5 text-green-500 inline"}):e.jsx(d,{className:"w-5 h-5 text-gray-300 inline"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("button",{onClick:()=>b(s),className:"text-blue-600 hover:text-blue-800",children:"详情"})})]},s.id))})]})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-end",onClick:()=>b(null),children:e.jsxs("div",{className:"bg-white w-full max-w-2xl h-full overflow-y-auto p-6 space-y-6",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:a.name}),e.jsx("p",{className:"text-gray-600",children:a.id})]}),e.jsx("button",{onClick:()=>b(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx(d,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"基础信息"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Category"}),e.jsx("p",{className:"font-medium",children:a.category})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Priority"}),e.jsx("p",{className:"font-medium",children:a.priority})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Owner"}),e.jsx("p",{className:"font-medium",children:a.owner})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("p",{className:"font-medium",children:a.status})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"描述"}),e.jsx("p",{className:"text-gray-700",children:a.description})]}),a.routes&&a.routes.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"路由"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:a.routes.map(s=>e.jsx("li",{className:"text-gray-700 font-mono text-sm",children:s},s))})]}),a.subFeatures&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"子功能"}),e.jsxs("p",{className:"text-gray-700",children:["共 ",a.subFeatures," 个子功能"]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"质量标准"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[a.hasRci?e.jsx(m,{className:"w-5 h-5 text-green-500"}):e.jsx(d,{className:"w-5 h-5 text-gray-300"}),e.jsx("span",{children:"RCI 契约"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[a.hasGoldenPath?e.jsx(m,{className:"w-5 h-5 text-green-500"}):e.jsx(d,{className:"w-5 h-5 text-gray-300"}),e.jsx("span",{children:"Golden Path"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"依赖关系"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Dependencies"}),a.dependencies.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:E(a.id).map(s=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-sm rounded",children:s.id},s.id))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"无依赖"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Dependents"}),N(a.id).length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:N(a.id).map(s=>e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 text-sm rounded",children:s.id},s.id))}):e.jsx("p",{className:"text-gray-500 text-sm",children:"无依赖者"})]})]})]})]})]})})]})}export{J as default};

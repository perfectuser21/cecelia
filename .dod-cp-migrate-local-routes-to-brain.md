---
id: dod-migrate-local-routes
version: 1.0.0
created: 2026-02-26
updated: 2026-02-26
changelog:
  - 1.0.0: 初始版本
---

# DoD: 将 5 个本地 API 路由迁移到 Brain

## 验收清单

- [ ] **D1**: Brain 新增 cluster 路由模块 (scan-sessions, kill-session, session-info, session-providers)
  - Test: `curl localhost:5221/api/brain/cluster/scan-sessions` 返回进程列表

- [ ] **D2**: Brain 新增 vps-monitor 路由模块 (stats, services, containers, history)
  - Test: `curl localhost:5221/api/brain/vps-monitor/stats` 返回 CPU/内存/磁盘信息

- [ ] **D3**: Brain 新增 tasks/projects 路由（复用 Brain 的 db pool）
  - Test: `curl localhost:5221/api/brain/tasks/projects` 返回项目列表

- [ ] **D4**: frontend-proxy.js 的 /api/v1/vps-monitor/* 路径正确改写到 Brain
  - Test: `curl localhost:5211/api/v1/vps-monitor/stats` 通过 proxy 返回数据

- [ ] **D5**: Brain 版本号 bump (patch)
  - Test: Brain package.json 版本号已更新

- [ ] **D6**: 所有新路由在 Brain server.js 中挂载
  - Test: server.js 中有对应 app.use 行

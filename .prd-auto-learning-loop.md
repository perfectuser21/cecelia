## PRD - 闭合 Cecelia 自动学习回路

**需求来源**: 用户需求 — 任务完成/失败时自动产生 learning，让 Cecelia 从自己的行为中自主学习成长

**功能描述**:
修改 execution-callback 端点，在任务完成或失败时自动向 learnings 表写入学习记录。无需用户手动输入，Cecelia 通过每日 rumination（反刍）消化这些 learning，最终更新 self-model。

**具体行为**:
1. status=completed 时：
   - 写入 learnings 表：category='execution_result', digested=false
   - title: '任务完成：{task.title}'
   - content: '任务成功完成。类型：{task_type}。触发来源：{trigger_source}。摘要：{summary 前200字或无}'

2. status=failed 时：
   - 写入 learnings 表：category='failure_pattern', digested=false
   - title: '任务失败：{task.title}'
   - content: '任务执行失败。重试次数：{retry_count}。错误摘要：{error信息前200字}'

**成本控制**:
- 只记录 task_type IN ('dev', 'feature', 'research')，跳过 code_review 等高频低价值类型
- 利用现有 content_hash（SHA256）自动去重，重复内容不写入
- 每日上限 50 条（进程内计数器 _autoLearningDailyCount）

**涉及文件**:
- `packages/brain/src/execution-callback.js` — 主要修改目标
- `packages/brain/src/routes.js` — 如果 callback 逻辑在此
- `packages/brain/test/execution-callback.test.js` — 单元测试（新建或修改）

**成功标准**:
- status=completed 时自动写入 category=execution_result learning
- status=failed 时自动写入 category=failure_pattern learning
- code_review task_type 被跳过
- content_hash 重复时不写入（幂等）
- 不影响现有 execution-callback 的 task 状态更新和 WS 广播
- npm test 全部通过

**非目标**:
- 不修改 rumination/self-model 逻辑（已有，只需确保 learning 能被消化）
- 不修改前端展示
- 不添加新的 API 端点

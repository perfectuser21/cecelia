---
id: bright-snacking-dewdrop-dod
version: 4.1.0
created: 2026-02-27
---

# DoD: OKR 讨论专属页面

## 验收清单

- [x] GET /api/brain/pending-actions/:id 端点已实现（routes.js）
  Test: manual: curl -s http://localhost:5221/api/brain/pending-actions/00000000-0000-0000-0000-000000000000 | node -e "process.stdin.resume()"
- [x] GET /api/brain/pending-actions/:id/versions 端点已实现
  Test: manual: curl -s http://localhost:5221/api/brain/pending-actions/00000000-0000-0000-0000-000000000000/versions | node -e "process.stdin.resume()"
- [x] POST /autumnrice/chat 添加重拆意图检测（REDECOMP_TRIGGERS）
  Test: manual: node -e "const c=require('fs').readFileSync('packages/brain/src/routes.js','utf8');process.exit(c.includes('REDECOMP_TRIGGERS')?0:1)"
- [x] POST /autumnrice/chat 返回 redecomp_triggered 字段
  Test: manual: node -e "const c=require('fs').readFileSync('packages/brain/src/routes.js','utf8');process.exit(c.includes('redecomp_triggered')?0:1)"
- [x] ProposalCard「与秋米对话」改为 navigate(`/okr/review/${id}`)
  Test: manual: node -e "const c=require('fs').readFileSync('apps/api/features/inbox/components/ProposalCard.tsx','utf8');process.exit(c.includes('okr/review')?0:1)"
- [x] 移除 ProposalCard 中的 showAutumnrice state 和 AutumnriceChat 内嵌
  Test: manual: node -e "const c=require('fs').readFileSync('apps/api/features/inbox/components/ProposalCard.tsx','utf8');process.exit(!c.includes('showAutumnrice')?0:1)"
- [x] OkrReviewPage.tsx 新建（含 KR 信息、对话区、版本历史、确认放行）
  Test: manual: node -e "require('fs').accessSync('apps/api/features/inbox/pages/OkrReviewPage.tsx')"
- [x] inbox/index.ts 注册 /okr/review/:id 路由和 OkrReviewPage 组件
  Test: manual: node -e "const c=require('fs').readFileSync('apps/api/features/inbox/index.tsx','utf8');process.exit(c.includes('OkrReviewPage')?0:1)"
- [x] Brain 版本 1.121.3（package.json + package-lock.json + .brain-versions + DEFINITION.md）
  Test: manual: node -e "const v=require('./packages/brain/package.json').version;process.exit(v>='1.121.3'?0:1)"
- [x] Workspace 版本 1.6.0（apps/api/package.json）
  Test: manual: node -e "const v=require('./apps/api/package.json').version;process.exit(v>='1.5.0'?0:1)"
- [x] facts-check 通过
  Test: manual: node scripts/facts-check.mjs
- [x] version-sync 通过
  Test: manual: bash scripts/check-version-sync.sh

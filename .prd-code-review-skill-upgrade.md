---
id: prd-code-review-skill-upgrade
version: 1.0.0
created: 2026-02-27
updated: 2026-02-27
changelog:
  - 1.0.0: 初始版本
---

# PRD: 升级 code-review SKILL.md

## 背景

当前 `packages/workflows/skills/code-review/SKILL.md`（v1.0.0）存在三个 bug：

1. **`--full` 旗标被忽视**：触发方式里写了 `--full`，但 Phase 1 永远执行 `git log --since="24 hours ago"`，全量扫描不生效
2. **`--level` 参数未处理**：Brain 派发时可传 `level: 3`，但 skill 完全不读这个参数
3. **R2 硬编码 Cecelia 模块名**：`tick/executor/thalamus/cortex` 写死，换个 repo 就失效

另外 description 为中文短句，对自然语言触发不友好。

## 目标

升级到 v1.1.0，修复上述问题。

## 变更内容

1. 在 Phase 1 开头增加 Step 1.0 作用域检测：
   - `--full` 或 `--level 3` → `git log --all --name-only`（无时间限制）
   - `--since=Nh` → 时间窗口
   - `--level 1|2` → 时间窗口 + 对应深度
   - 无 flags → 默认 24h

2. R2 去掉 Cecelia 专有模块名，改为通用描述

3. description 改为英文自然语言版本（skill-creator iteration 1 产物）

4. 版本号 1.0.0 → 1.1.0，updated 日期更新

## 成功标准

- SKILL.md version 字段 = 1.1.0
- description 为英文
- Phase 1 包含 Step 1.0 scope 检测逻辑
- R2 不含 tick/executor/thalamus/cortex 等硬编码名称

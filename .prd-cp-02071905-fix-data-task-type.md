# PRD: 修复 task_type='data' 数据库约束缺失

## 问题描述

代码中使用 `task_type='data'` 路由到 HK 服务器，但数据库约束中没有这个类型。

**当前约束**：
```sql
CHECK (task_type IN ('dev','review','talk','automation','research','qa','audit'))
```

**代码使用**（task-router.js）：
```javascript
'data': 'hk',  // 数据处理 → HK (N8N)
```

**影响**：任何尝试创建 `task_type='data'` 的任务都会因违反约束而失败。

## 解决方案

创建迁移 017，在 task_type 约束中添加 'data'。

## 实现细节

1. 创建 `brain/migrations/017_add_data_task_type.sql`
2. DROP 现有约束 → ADD 新约束（包含 'data'）
3. 更新 `selfcheck.js` EXPECTED_SCHEMA_VERSION → '017'
4. 更新所有文档中的 schema 版本

## 验收标准

- [ ] 迁移文件创建
- [ ] selfcheck.js 更新到 '017'
- [ ] DEFINITION.md schema 版本更新
- [ ] 迁移成功运行
- [ ] 数据库约束包含 'data'
- [ ] CI 通过

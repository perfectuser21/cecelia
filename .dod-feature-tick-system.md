# DoD: Feature Tick 循环系统

## 验收清单

### 数据库
- [ ] features 表创建成功，包含状态机字段
- [ ] tasks 表新增字段：execution_mode, location, feature_id, summary, quality_gate
- [ ] recurring_tasks 表创建成功

### Feature Tick
- [ ] 检测 status=planning 的 Features
- [ ] 检测 status=task_completed 的 Features
- [ ] 调用秋米规划第一个 Task
- [ ] 调用秋米评估并规划下一个 Task
- [ ] Feature 完成时正确更新状态

### 任务分流
- [ ] 识别 Single Task vs Feature
- [ ] 按 task_type 分配 location (us/hk)
- [ ] dev/review → us
- [ ] automation/data → hk

### 防串线
- [ ] feature_id 强绑定
- [ ] active_task_id 状态锁
- [ ] Task 创建时检查无其他活跃 Task
- [ ] Task 完成时校验 feature_id 一致

### 集成
- [ ] Feature Tick 集成到主 Tick 循环
- [ ] 不影响现有 Task Tick 功能

## 测试场景

1. 创建一个 Single Task，验证直接执行完成
2. 创建一个 Feature，验证边做边拆循环
3. 尝试在 Feature 有活跃 Task 时创建新 Task，应报错
4. 验证 location 分流正确

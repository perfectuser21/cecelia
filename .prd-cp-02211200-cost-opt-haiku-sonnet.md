---
id: prd-cp-02211200-cost-opt-haiku-sonnet
version: 1.0.0
created: 2026-02-21
updated: 2026-02-21
changelog:
  - 1.0.0: 初始版本
---

# PRD: 成本优化 — 丘脑换 Haiku，皮层换 Sonnet

## 功能描述

将 Brain 内两个高频 LLM 调用切换到更低成本模型：
- 丘脑（thalamus.js）：Sonnet → Haiku（节省 3x，每 5 分钟跑一次）
- 皮层（cortex.js）：Opus → Sonnet（节省 5x，按需深度分析）

丘脑职责为结构化 JSON 路由判断（从白名单选 action），Haiku 完全胜任。
皮层换 Sonnet 保留足够推理能力，max_tokens 4096 不变。

## 成功标准

- thalamus.js 使用 `claude-haiku-4-5-20251001`，函数名更新为 callHaiku
- cortex.js 使用 `claude-sonnet-4-20250514`，日志和 recordTokenUsage 同步更新
- MODEL_PRICING 中 haiku key 更新为新模型 ID 和正确价格
- 所有测试通过

## 变更范围

- brain/src/thalamus.js
- brain/src/cortex.js

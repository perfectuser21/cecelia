---
id: prd-account-usage-ui
version: 1.0.0
created: 2026-02-27
updated: 2026-02-27
changelog:
  - 1.0.0: 初始版本
---

# PRD: Claude Max 账号用量卡片

## 背景

Cecelia Brain 已实现用量感知账号调度（v1.117.0），会自动选择用量最低的 Claude Max 账号。
但用户无法在前台看到当前各账号的用量状态，需要在 Dashboard 的 LiveMonitorPage 添加可视化展示。

## 目标

在 Cecelia Dashboard 的 LiveMonitorPage 添加一个 **Claude Max 账号用量卡片**，让用户实时了解各账号的使用情况和当前推荐账号。

## 功能需求

### 数据来源
- API: `GET /api/brain/account-usage`
- 返回格式:
  ```json
  {
    "ok": true,
    "usage": {
      "account1": { "five_hour_pct": 1, "seven_day_pct": 0, "resets_at": null },
      "account2": { "five_hour_pct": 29, "seven_day_pct": 9, "resets_at": null },
      "account3": { "five_hour_pct": 2, "seven_day_pct": 0, "resets_at": null }
    }
  }
  ```

### 展示内容
1. **卡片标题**: "Claude Max 账号用量"
2. **每个账号**（account1/2/3）:
   - 账号名称
   - 5小时用量进度条（百分比 + 颜色区分：绿<50%，黄50-79%，红≥80%）
   - 7天用量（文字显示）
3. **推荐账号标签**: 高亮显示当前用量最低的账号（"推荐" badge）
4. **自动刷新**: 每60秒自动重新请求 API
5. **手动刷新按钮**: 点击立即刷新
6. **加载/错误状态**: 优雅处理

## 成功标准

1. 卡片出现在 LiveMonitorPage 中
2. 三个账号的5小时用量进度条正确显示
3. 进度条颜色随用量变化（绿/黄/红）
4. 最低用量账号有"推荐"标签
5. 每60秒自动刷新数据
6. 手动刷新按钮可用
7. API 报错时显示友好错误信息，不崩溃

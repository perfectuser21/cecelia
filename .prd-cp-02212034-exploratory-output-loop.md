---
id: prd-exploratory-output-loop
version: 1.0.0
created: 2026-02-21
updated: 2026-02-21
changelog:
  - 1.0.0: 初始版本
---

# PRD: 修复 exploratory Output Loop

## 需求来源

架构审查（2026-02-21）发现 exploratory 任务跑完后无法直接创建 dev 任务：
1. `executor.js` preparePrompt 给 exploratory 任务的 prompt 里没有 task_id/goal_id/project_id
2. `~/.claude/skills/exploratory/steps/05-output-loop.md` 文件不存在

导致每次 exploratory 完成后都需要走备用的"探索续拆→秋米"路径，多一整轮 LLM 调用。

## 功能描述

修复 exploratory 任务的 Output Loop，使其跑完后能直接通过 Brain API 创建 dev 任务，无需再绕一圈秋米。

## 成功标准

- [ ] executor.js preparePrompt 对 exploratory 任务注入 BRAIN_TASK_ID / BRAIN_GOAL_ID / BRAIN_PROJECT_ID
- [ ] ~/.claude/skills/exploratory/steps/05-output-loop.md 存在且包含 Brain API 调用指令
- [ ] exploratory prompt 明确要求 Step 5 创建 dev 任务并回传 findings
- [ ] 单测：exploratory prompt 包含 task_id/goal_id/project_id
- [ ] 全量测试通过

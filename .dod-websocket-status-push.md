# DoD - WebSocket 状态推送

QA: docs/QA-DECISION.md

## 验收标准

### 功能验收

#### 后端实现
- [ ] WebSocket 服务器成功启动并监听
      Test: tests/brain/websocket.test.js
- [ ] 任务创建时发送 task:created 事件
      Test: tests/brain/websocket.test.js
- [ ] 任务开始时发送 task:started 事件
      Test: tests/brain/websocket.test.js
- [ ] 任务完成时发送 task:completed 事件
      Test: tests/brain/websocket.test.js
- [ ] 任务失败时发送 task:failed 事件
      Test: tests/brain/websocket.test.js
- [ ] Executor 资源状态变化时发送 executor:status 事件
      Test: tests/brain/websocket.test.js
- [ ] 多客户端同时连接能正常接收广播
      Test: tests/brain/websocket.test.js

#### 前端实现
- [ ] 前端能成功连接 WebSocket
      Test: tests/frontend/websocket.test.ts
- [ ] 前端能接收并解析 WebSocket 消息
      Test: tests/frontend/websocket.test.ts
- [ ] 断线后自动重连成功
      Test: manual:重启 Brain 后验证前端重连
- [ ] ExecutionStatusPanel 实时显示任务状态（不再轮询）
      Test: manual:观察任务状态实时更新
- [ ] useTaskStatus Hook 返回实时任务列表
      Test: tests/frontend/hooks/useTaskStatus.test.ts

### 测试验收
- [ ] 后端 WebSocket 测试通过
      Test: cd brain && npm test -- websocket.test.js
- [ ] 前端 WebSocket 测试通过
      Test: cd frontend && npm test -- websocket.test
- [ ] RCI 回归测试通过
      Test: contract:WebSocket-001

## 非验收项（明确排除）
- 不验证房间/频道机制
- 不验证客户端认证
- 不验证消息持久化
- 不验证 Socket.IO 实现

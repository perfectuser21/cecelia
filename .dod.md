# Alertness Decision Framework DoD

## 成功标准检查清单

### 1. 分级响应 ✅
- [ ] 5个警觉阶段正确定义（HEALTHY、VIGILANT、STRESSED、CRITICAL、EMERGENCY）
- [ ] 0-10级别正确映射到5个阶段
- [ ] 每个阶段有明确的行为限制
- [ ] 状态转换时触发相应动作

### 2. 智能决策 ✅
- [ ] Level 3-5：减少并发到2，增加5秒延迟
- [ ] Level 6-7：停止P2任务，单任务运行，10秒延迟
- [ ] Level 8-9：暂停任务派发，触发自动恢复
- [ ] Level 10：紧急停机，保存状态，人工介入

### 3. 自动恢复 ✅
- [ ] Critical 状态触发自动恢复尝试
- [ ] 5种恢复策略实现（清理积压、释放隔离、重置熔断、GC、重启服务）
- [ ] 恢复成功后 Alertness 下降
- [ ] 恢复失败触发人工告警

### 4. 系统联动 ✅
- [ ] Tick Loop 根据 Alertness 调整频率
- [ ] Task Router 根据限制调整派发
- [ ] Circuit Breaker 阈值动态调整
- [ ] WebSocket 实时推送状态变化

### 5. 可审计性 ✅
- [ ] alertness_decisions 表创建和记录
- [ ] 决策包含完整上下文
- [ ] 可追踪决策效果
- [ ] API 端点提供决策历史查询

### 6. 测试覆盖 ✅
- [ ] 单元测试：各阶段行为验证
- [ ] 集成测试：状态转换和系统联动
- [ ] 场景测试：模拟系统压力
- [ ] 恢复测试：各种恢复策略效果
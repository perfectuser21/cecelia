# DoD: Fix decomposition-checker infinite loop bug

## 代码变更 ✅

### 1. 修复去重查询逻辑
- **File**: `brain/src/decomposition-checker.js:40-42`
- **Change**: 在 `hasExistingDecompositionTask()` 函数的去重查询中添加 failed 任务24小时窗口
- **Test**: `brain/src/__tests__/decomposition-checker.test.js` - 添加 "should deduplicate failed tasks within 24h window" 测试

### 2. 版本号更新
- **File**: `brain/package.json`
- **Change**: 1.40.9 → 1.40.10 (patch)
- **Test**: CI 自动检查版本同步

## 测试覆盖 ✅

### 单元测试
- **Test**: hasExistingDecompositionTask() 对 queued/in_progress/completed/failed 的去重逻辑
- **Test**: failed 任务超过 24 小时后不去重
- **Test**: failed 任务在 24 小时内去重

### 集成测试（可选）
- **Test**: 创建 failed 拆解任务 → 运行 runDecompositionChecks() → 验证不重复创建

## CI 检查 ✅

### Version Check
- **Test**: brain/package.json 版本已更新
- **Test**: package-lock.json 同步
- **Test**: .brain-versions 同步
- **Test**: DEFINITION.md Brain 版本同步

### Facts Consistency
- **Test**: 所有 code facts 与 DEFINITION.md 一致

### Brain (Node.js)
- **Test**: 所有现有测试通过
- **Test**: 新增测试通过
- **Test**: 测试覆盖率不下降

## 验收清单 ✅

- [ ] hasExistingDecompositionTask() 包含 failed 状态去重
- [ ] 测试验证 failed 任务 24h 窗口去重
- [ ] 测试验证 failed 任务 >24h 不去重
- [ ] 版本号已更新（1.40.10）
- [ ] CI 所有检查通过
- [ ] PR 已创建并合并到 develop

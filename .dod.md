# DoD - Decomposition Checker

## Acceptance Checklist

### 7 Check Functions

- [ ] checkGlobalOkrDecomposition() detects Global OKR without Global KR children
      Test: brain/src/__tests__/decomposition-checker.test.js

- [ ] checkGlobalKrDecomposition() detects Global KR without Area OKR children
      Test: brain/src/__tests__/decomposition-checker.test.js

- [ ] checkAreaOkrDecomposition() detects Area OKR without Area KR children
      Test: brain/src/__tests__/decomposition-checker.test.js

- [ ] checkAreaKrProjectLink() detects Area KR not linked to any Project
      Test: brain/src/__tests__/decomposition-checker.test.js

- [ ] checkProjectDecomposition() detects Project without Initiative
      Test: brain/src/__tests__/decomposition-checker.test.js

- [ ] checkInitiativeDecomposition() detects Initiative without Task
      Test: brain/src/__tests__/decomposition-checker.test.js

- [ ] checkExploratoryDecompositionContinue() detects exploratory tasks needing follow-up
      Test: brain/src/__tests__/decomposition-checker.test.js

### Dedup Logic

- [ ] hasExistingDecompositionTask() returns true for queued/in_progress decomposition tasks
      Test: brain/src/__tests__/decomposition-checker.test.js

- [ ] Skips creation when decomposition task completed within 24 hours
      Test: brain/src/__tests__/decomposition-checker.test.js

### Entry Point

- [ ] runDecompositionChecks() runs all 7 checks and returns summary
      Test: brain/src/__tests__/decomposition-checker.test.js

### Created Task Payload

- [ ] payload.decomposition = 'true'
      Test: brain/src/__tests__/decomposition-checker.test.js

- [ ] trigger_source = 'brain_auto'
      Test: brain/src/__tests__/decomposition-checker.test.js

### Regression

- [ ] All existing tests pass
      Test: npm test

- [ ] CI passes
      Test: contract:CI-Pass

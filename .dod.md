# DoD - M4 Queue Layer Migration

QA: docs/QA-DECISION.md

## 验收标准

### Queue 模块

- [x] get_queue() 返回队列状态
      Test: tests/test_queue.py
- [x] init_queue() 初始化队列
      Test: tests/test_queue.py
- [x] get_next_prd() 获取下一个 PRD
      Test: tests/test_queue.py
- [x] start_current_prd() 开始执行
      Test: tests/test_queue.py
- [x] complete_prd() 完成 PRD
      Test: tests/test_queue.py
- [x] fail_prd() 标记失败
      Test: tests/test_queue.py
- [x] retry_failed() 重试失败
      Test: tests/test_queue.py
- [x] clear_queue() 清空队列
      Test: tests/test_queue.py
- [x] get_queue_summary() 队列摘要
      Test: tests/test_queue.py

### API 路由

- [x] GET /api/brain/queue 获取队列
      Test: tests/test_queue_api.py
- [x] POST /api/brain/queue/init 初始化
      Test: tests/test_queue_api.py
- [x] GET /api/brain/queue/next 获取下一个
      Test: tests/test_queue_api.py
- [x] POST /api/brain/queue/start 开始执行
      Test: tests/test_queue_api.py
- [x] POST /api/brain/queue/complete 完成
      Test: tests/test_queue_api.py
- [x] POST /api/brain/queue/fail 标记失败
      Test: tests/test_queue_api.py
- [x] POST /api/brain/queue/retry 重试
      Test: tests/test_queue_api.py
- [x] DELETE /api/brain/queue 清空
      Test: tests/test_queue_api.py

### 测试验收

- [x] pytest tests/test_queue.py 通过 (21 tests)
      Test: PYTHONPATH=. pytest tests/test_queue.py -v
- [x] pytest tests/test_queue_api.py 通过 (16 tests)
      Test: PYTHONPATH=. pytest tests/test_queue_api.py -v

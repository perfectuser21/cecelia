# DoD: 审计 P1 Bug 修复（v1.52.2）

## 验收清单

- [ ] tick.js: hasFocus=false 且队列空时，planNextTask 被调用（krIds 逻辑修复）
- [ ] tick.js: allGoalIds=[] 时返回 no_active_goals，不查询 SQL
- [ ] tick.js: WHERE 子句移除 `OR $1 = '{}'` 条件
- [ ] executor.js: requeueTask 调用后 learnings 表有失败记录
- [ ] decomp-checker.js: kr_id 为 null 的 initiative 被 warn+skip，不抛异常
- [ ] tick-global-fallback-planner.test.js 通过（新增测试）
- [ ] tick-empty-goals-early-return.test.js 通过（新增测试）
- [ ] executor-requeue-learning.test.js 通过（新增测试）
- [ ] decomp-checker-null-krid.test.js 通过（新增测试）
- [ ] 全量 vitest run 通过
- [ ] facts-check.mjs 通过
- [ ] check-version-sync.sh 通过

## 版本变化

patch bump：1.52.1 → 1.52.2

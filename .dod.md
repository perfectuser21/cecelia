---
id: kr-auto-decomp-dod
version: 1.0.0
created: 2026-02-07
updated: 2026-02-07
changelog:
  - 1.0.0: 初始版本
---

# DoD - Auto-create KR decomposition tasks on needs_planning

QA: 验证 tick 对 needs_planning 自动创建 KR 拆解任务

## 验收清单

| # | DoD 条目 | Test 映射 | 验证方式 |
|---|---------|-----------|----------|
| 1 | needs_planning 时自动创建 KR 拆解任务 | `brain/src/__tests__/tick-kr-decomp.test.js` | 单元测试 |
| 2 | 去重：已存在拆解任务时不重复创建 | `brain/src/__tests__/tick-kr-decomp.test.js` | 单元测试 |
| 3 | 任务包含正确 goal_id, project_id, trigger_source | `brain/src/__tests__/tick-kr-decomp.test.js` | 单元测试 |
| 4 | 全量测试不回归 | `cd brain && npx vitest run` | CI |
| 5 | DevGate 全绿 | `node scripts/facts-check.mjs && bash scripts/check-version-sync.sh` | CI |

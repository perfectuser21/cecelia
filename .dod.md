# DoD: 修复 execution-callback SQL 类型 Bug（P0）

## 验收清单

| # | DoD 条目 | Test 映射 | 验证方式 |
|---|----------|-----------|----------|
| 1 | `routes.js` UPDATE tasks 使用独立 boolean `$6` 替代 `CASE WHEN $2` | callback-atomic.test.js > UPDATE tasks should use boolean $6 | Vitest |
| 2 | `AI Done` 任务完成后 `isCompleted=true` 作为 $6 传入 | callback-atomic.test.js > UPDATE tasks should use boolean $6 | Vitest |
| 3 | `AI Failed` 任务 `isCompleted=false` 作为 $6 传入 | callback-atomic.test.js > isCompleted should be false for AI Failed | Vitest |
| 4 | PostgreSQL 不再报 `inconsistent types deduced for parameter $2` | PREPARE test_no_conflict (手动验证通过) | psql |
| 5 | 全量 vitest 通过（118 文件，1625 测试） | npm test | CI |
| 6 | facts-check.mjs 通过 | node scripts/facts-check.mjs | CI |
| 7 | check-version-sync.sh 通过（版本 1.52.3） | bash scripts/check-version-sync.sh | CI |

## 版本变化

patch bump：1.52.2 → 1.52.3

# DoD - 修复 Migration 036 后的 KR 类型兼容性问题

## 验收标准

### 功能验收

- [ ] planner.js 的 getGlobalState() 能正确查询所有类型的 KRs（kr, global_kr, area_kr）
      Test: brain/src/__tests__/planner.test.js

- [ ] similarity.js 的 getAllActiveEntities() 能正确关联所有类型的 KRs
      Test: brain/src/__tests__/similarity.test.js

- [ ] planner.test.js 测试通过（修复后能识别新 KR 类型）
      Test: npm test brain/src/__tests__/planner.test.js

- [ ] Brain 能自动生成 KR decomposition 任务（端到端验证）
      Test: manual:触发 tick 后检查任务队列

### 测试验收

- [ ] 所有现有测试通过
      Test: npm test

- [ ] CI 通过
      Test: contract:CI-Pass

### 回归风险验证

- [ ] 向后兼容旧的 'kr' 类型（如果数据库中仍有旧类型）
      Test: brain/src/__tests__/planner.test.js

- [ ] 不影响其他查询 goals 表的代码
      Test: npm test

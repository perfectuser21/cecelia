---
id: dod-quickroute-dept-exception
version: 1.0.0
created: 2026-02-18
updated: 2026-02-18
changelog:
  - 1.0.0: 初始版本 - RESOURCE_LOW quickRoute 扩展
---

# DoD: quickRoute 扩展 - DEPARTMENT_REPORT + EXCEPTION_REPORT

## 验收清单

- [ ] quickRoute 对 DEPARTMENT_REPORT 返回 log_event（confidence: 0.9）
- [ ] quickRoute 对 EXCEPTION_REPORT（severity: low）返回 log_event + analyze_failure（confidence: 0.85）
- [ ] quickRoute 对 EXCEPTION_REPORT（severity: medium）返回 log_event + analyze_failure（confidence: 0.85）
- [ ] quickRoute 对 EXCEPTION_REPORT（severity: high）返回 null（交给 Sonnet）
- [ ] quickRoute 对 EXCEPTION_REPORT（severity: critical）返回 null（交给 Sonnet）
- [ ] 不破坏现有 quickRoute 测试（heartbeat/tick/task_completed 等）
- [ ] facts-check 通过
- [ ] 所有现有测试通过（无回归）

## Test 映射

| # | DoD 条目 | Test 映射 | 验证方式 |
|---|----------|-----------|---------|
| 1 | DEPARTMENT_REPORT → log_event | thalamus.test.js: "should log and archive department report" | vitest |
| 2 | EXCEPTION_REPORT low → log_event + analyze_failure | thalamus.test.js: "should log and analyze low severity exception report" | vitest |
| 3 | EXCEPTION_REPORT medium → log_event + analyze_failure | thalamus.test.js: "should log and analyze medium severity exception report" | vitest |
| 4 | EXCEPTION_REPORT high → null | thalamus.test.js: "should return null for high severity exception report" | vitest |
| 5 | EXCEPTION_REPORT critical → null | thalamus.test.js: "should return null for critical severity exception report" | vitest |
| 6 | 无回归 | thalamus.test.js: 现有测试通过 | vitest 全量 |
| 7 | facts-check | node scripts/facts-check.mjs | 自动化 |

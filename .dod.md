---
id: dod-patrol-agent-m1
version: 1.0.0
created: 2026-01-29
updated: 2026-01-29
changelog:
  - 1.0.0: M1 验收清单
---

# DoD: Patrol Agent M1

## 验收清单

### 功能验收

- [ ] `src/state/patrol.py` 实现核心逻辑
  - [ ] `get_stale_tasks()` 获取卡住任务
  - [ ] `record_diagnosis()` 记录诊断
  - [ ] `record_action()` 记录行动
  - [ ] `get_patrol_logs()` 查询日志
  - [ ] `get_patrol_summary()` 统计摘要

- [ ] `src/api/patrol_routes.py` API 路由
  - [ ] `GET /api/patrol/stale`
  - [ ] `POST /api/patrol/diagnose/:id`
  - [ ] `POST /api/patrol/action/:id`
  - [ ] `GET /api/patrol/logs`
  - [ ] `GET /api/patrol/summary`

- [ ] `src/api/main.py` 注册路由

### 测试验收

- [ ] `tests/test_patrol_api.py` 存在
- [ ] 测试覆盖所有端点
- [ ] `pytest tests/test_patrol_api.py -v` 通过

### 代码规范

- [ ] 无 linting 错误
- [ ] 代码风格与现有代码一致
- [ ] 有适当的日志记录

### 集成验收

- [ ] CI 通过
- [ ] PR 合并到 develop

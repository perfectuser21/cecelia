---
id: dod-devgate-unify
version: 1.0.0
created: 2026-02-06
updated: 2026-02-06
changelog:
  - 1.0.0: 初始版本
---

# DoD: DevGate 统一 + CORE_DEV_PROMPT 落地

QA: 无需独立 QA（工具脚本 + 配置文件，无用户界面变更）

## 验收清单

| # | DoD 条目 | Test 映射 | 验证方式 |
|---|---------|-----------|----------|
| 1 | check-version-sync.sh 检查 4 个版本文件同步 | `bash scripts/check-version-sync.sh` | 退出码 0，输出 4 个 ✅ |
| 2 | check-dod-mapping.cjs 检查 DoD 有 Test 映射 | `node scripts/devgate/check-dod-mapping.cjs` | 退出码 0 |
| 3 | .brain-versions 已更新到 1.9.4 | `cat .brain-versions` | 内容 = 1.9.4 |
| 4 | .claude/CLAUDE.md 包含 CORE_DEV_PROMPT | `grep "DevGate" .claude/CLAUDE.md` | 包含 6 节内容 |
| 5 | CI facts-check job 追加 version-sync + dod-mapping | `grep ci.yml` | step 存在 |
| 6 | facts-check.mjs 仍然全绿 | `node scripts/facts-check.mjs` | 退出码 0 |
| 7 | 现有测试不回归 | `cd brain && npx vitest run` | >= 668 pass |

## 测试验收

- [ ] `bash scripts/check-version-sync.sh` 全绿
- [ ] `node scripts/devgate/check-dod-mapping.cjs` 通过
- [ ] `node scripts/facts-check.mjs` 全绿
- [ ] `cd brain && npx vitest run` 无回归

# DoD - 隔离区自动释放机制

## 验收标准

### 功能验收

#### 释放条件检查
- [ ] 系统检查隔离任务的隔离时间是否超过阈值
      Test: brain/src/__tests__/quarantine-release.test.js
- [ ] 系统根据隔离原因应用不同的释放策略
      Test: brain/src/__tests__/quarantine-release.test.js
- [ ] 系统检查 Alertness 状态，EMERGENCY/COMA 时不释放
      Test: manual:代码审查 + integration test

#### 释放策略实现
- [ ] BILLING_CAP: 等到 reset_time 后自动释放
      Test: brain/src/__tests__/quarantine-release.test.js
- [ ] NETWORK/RATE_LIMIT: 冷却 30 分钟后自动释放
      Test: brain/src/__tests__/quarantine-release.test.js
- [ ] RESOURCE: 冷却 1 小时后自动释放
      Test: brain/src/__tests__/quarantine-release.test.js
- [ ] REPEATED_FAILURE: 24 小时后允许重试一次
      Test: brain/src/__tests__/quarantine-release.test.js
- [ ] MALICIOUS: 永不自动释放
      Test: brain/src/__tests__/quarantine-release.test.js

#### 自动释放逻辑
- [ ] tick.js 在每次 tick 时调用释放检查函数
      Test: brain/src/__tests__/tick.test.js
- [ ] 满足条件的任务从隔离区移出，状态重置为 queued
      Test: brain/src/__tests__/quarantine-release.test.js
- [ ] 释放后的任务重新进入调度队列
      Test: brain/src/__tests__/quarantine-release.test.js

#### 边界情况
- [ ] 隔离原因为空或未知时不自动释放
      Test: brain/src/__tests__/quarantine-release.test.js
- [ ] 多个任务同时满足释放条件时正确处理
      Test: brain/src/__tests__/quarantine-release.test.js
- [ ] 释放失败时不影响其他任务
      Test: brain/src/__tests__/quarantine-release.test.js

### 测试验收
- [ ] 所有单元测试通过（npm test）
      Test: contract:C2-001
- [ ] Facts Check 通过（action_count 不变）
      Test: contract:C2-002
- [ ] 代码符合现有架构模式
      Test: manual:代码审查确认

### 文档验收
- [ ] DEFINITION.md 更新隔离区自动释放说明
      Test: manual:文档审查
- [ ] MEMORY.md 记录实现要点
      Test: manual:文档审查

# DoD: Branch Protection Setup Scripts

## 验收标准

- [x] 创建 setup-branch-protection-v2.sh 脚本
  Test: manual:script_file_exists
- [x] 脚本可成功执行
  Test: manual:实际执行成功_main_develop_保护已生效
- [x] main 分支已配置保护
  Test: manual:GitHub_settings_branch_protection
- [x] develop 分支已配置保护
  Test: manual:GitHub_settings_branch_protection
- [x] 强制 CI 检查 (quality-check)
  Test: manual:Require_status_checks_enabled
- [x] enforce_admins = true
  Test: manual:Include_administrators_enabled
- [x] allow_force_pushes = false
  Test: manual:直接push被阻止
- [x] allow_deletions = false
  Test: manual:Do_not_allow_deletions_enabled
- [x] 实际测试：直接 push 被阻止
  Test: manual:protected_branch_hook_declined
- [x] 文档更新：使用说明
  Test: manual:README_updated

## 测试方法

**自动化测试**:
- CI workflow 验证脚本语法

**手动验证**:
- 访问 https://github.com/ZenithJoycloud/cecelia-quality/settings/branches
- 确认 main 和 develop 保护规则正确
- 尝试直接 push 到 develop（应被阻止）✅ 已验证

## 相关文件

- scripts/setup-branch-protection-v2.sh
- scripts/setup-branch-protection.sh
- scripts/setup-branch-protection-simple.sh

## QA

QA: docs/QA-DECISION.md
Audit: docs/AUDIT-REPORT.md

# Alertness Decision Framework PRD

## 功能描述
扩展 Alertness 系统从 0-3 级到 0-10 级，建立完整的决策框架，让系统能根据不同警觉等级自动调整行为模式，实现"知道自己病了就要休息"的智能自适应。

## 成功标准
1. 实现 5 个警觉阶段（HEALTHY、VIGILANT、STRESSED、CRITICAL、EMERGENCY）
2. 每个阶段有明确的行为限制和自动响应
3. 系统能自动恢复和降级
4. 与其他子系统（Circuit Breaker、Quarantine）联动

## 核心功能需求

### 1. 分级定义（0-10级别，5个阶段）
- HEALTHY (0-2): 健康，全速运行，最大并发3
- VIGILANT (3-5): 警惕，减少并发到2，5秒延迟
- STRESSED (6-7): 压力，单任务运行，停止P2任务
- CRITICAL (8-9): 危急，暂停派发，触发自动恢复
- EMERGENCY (10): 紧急，系统保护，人工介入

### 2. 智能决策引擎
- 基于当前状态的智能决策
- 状态转换检测和处理
- 决策去抖动（5秒内不重复）
- 分级响应策略

### 3. 自动恢复机制
- Critical 状态触发自动恢复尝试
- 5种恢复策略依次尝试
- 恢复成功后 Alertness 下降
- 恢复失败触发人工告警

### 4. 系统联动
- Tick Loop 根据 Alertness 调整频率
- Task Router 根据限制调整派发
- Circuit Breaker 阈值动态调整
- WebSocket 实时推送状态变化

### 5. 决策审计
- 所有决策记录到 alertness_decisions 表
- 决策包含完整上下文
- 可追踪决策效果
---
id: prd-worker-account-model-skill-core
version: 1.0.0
created: 2026-02-25
updated: 2026-02-25
changelog:
  - 1.0.0: 初始版本
---

# PRD: Worker 账户/模型/Skill 三字段重设计 (Brain)

## 需求来源
用户要求 WorkerPanel UI 从"账户→模型→Skill"顺序选择，前端需要从 Brain API 动态拉取可用账户列表。

## 功能描述

### 1. GET /api/brain/credentials 新端点
扫描两处 credential 文件，返回可用账户列表：
- `~/.claude/.account*.json` → type: anthropic_oauth（Anthropic Claude Code OAuth）
- `~/.credentials/*.json` → type: api_key（MiniMax/OpenAI 等）

返回格式：
```json
[
  {"name": "account1", "type": "anthropic_oauth", "path": "~/.claude/.account1.json", "provider": "anthropic"},
  {"name": "account2", "type": "anthropic_oauth", "path": "~/.claude/.account2.json", "provider": "anthropic"},
  {"name": "minimax", "type": "api_key", "path": "~/.credentials/minimax.json", "provider": "minimax"}
]
```

### 2. cecelia-run 支持 account1/account2
当 CECELIA_CREDENTIALS=account2 时读取 ~/.claude/.account2.json 的 accessToken 注入 ANTHROPIC_AUTH_TOKEN。

## 涉及文件
- brain/src/routes.js — 新增 GET /api/brain/credentials 端点
- /home/xx/bin/cecelia-run — 加 account1/account2 分支
- brain/package.json — 版本 bump 1.95.6 → 1.95.7

## 成功标准
- GET /api/brain/credentials 返回正确账户列表
- cecelia-run CECELIA_CREDENTIALS=account2 正确注入 accessToken
- npm test 通过

## 非目标
- 不修改 executor.js 的账户选择逻辑
- 不修改前端（workspace 单独 PR）

# Initiative 4-Phase 编排系统 — PR 1: Migration + 数据层

## 背景

当前 Cecelia 的 Initiative 编排存在两个核心问题：
1. 秋米拆得太细：从 KR 一路拆到 Task 级别，但秋米看不到代码，拆出的 Task 经常不准
2. exploratory 双 pass 浪费 token：先跑 exploratory 会话只产出文字，再跑 dev 会话重新理解代码

改为 4-Phase 编排：
- 秋米只拆到 Initiative（写方向 + DoD）
- Agent 读代码自主拆 Task（Plan Phase）
- 质检拆解质量（Review Phase）
- 逐个执行（Dev Phase）
- DoD 验收（Verify Phase）

## 功能描述

为 Initiative 添加 4-Phase 编排能力（plan → review → dev → verify），实现 Agent 自主拆解 Task + DoD 验收闭环。

## 成功标准

- Migration 057 正确添加 projects 编排列和 task_type 扩展
- selfcheck schema version 与 migration 同步
- task-router 正确路由新 task type
- createInitiative 支持 orchestrated 模式
- 所有测试通过

## PR 1 范围

### 1. Migration 057: initiative_orchestration
- projects 表新增 3 列：execution_mode, current_phase, dod_content
- tasks.task_type CHECK 扩展：新增 initiative_plan, initiative_verify
- 相关索引

### 2. selfcheck.js
- EXPECTED_SCHEMA_VERSION: '056' → '057'

### 3. task-router.js
- LOCATION_MAP 新增 initiative_plan → us, initiative_verify → us
- isValidTaskType validTypes 新增两个类型

### 4. actions.js
- createInitiative 扩展支持 execution_mode, dod_content 参数
- orchestrated initiative: current_phase='plan', status='active'
- simple initiative: 不变

### 5. 测试
- selfcheck schema version 一致性
- task-router 路由和验证
- actions createInitiative 新参数

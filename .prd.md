---
id: prd-cecelia-page-data-alignment
version: 1.0.0
created: 2026-02-26
updated: 2026-02-26
changelog:
  - 1.0.0: 初始版本
---

# PRD: CeceliaPage 前后端数据对齐

## 背景

CeceliaPage V2 前端骨架（PR #8-10）已完成，但前端期望的 API 数据格式与 Brain 后端实际返回的不一致，导致：
- TodayOverview 成功率显示 0%（前端期望 `task_stats.completed_today`，后端没返回）
- Briefing API 404（路由不存在或路径不对）
- WebSocket `tick:executed` 广播崩溃（`actionsToday is not defined`）
- 页面上看不到 Cecelia 在关心什么、今天做了什么

## 目标

让 CeceliaPage 前端所有组件都能正确获取并显示数据，使 Cecelia "活起来"。

## 具体修复

### 1. Brain: `/api/brain/status/full` 返回 today stats
- 在返回值中增加 `task_stats: { completed_today, failed_today, queued, in_progress }`
- 增加 `tick_stats: { last_tick_at, interval_minutes, actions_today }`
- 增加 `token_stats: { today_usd }`（可选，如有数据源）

### 2. Brain: 修复 WebSocket `tick:executed` 广播 bug
- 日志中 `actionsToday is not defined` — 修复变量引用

### 3. Brain: 确保 briefing 路由可达
- 检查 `/api/brain/briefing` 或 `/api/orchestrator/briefing` 路由
- 修复路由注册使其可达

### 4. 前端: 对齐数据字段
- 确保 CeceliaPage 使用的字段名与 Brain API 返回一致

## 成功标准

- TodayOverview 显示正确的今日成功率（有完成任务时 > 0%）
- PulseStrip 显示正确的 running/queued 计数和 tick 倒计时
- EventStream 通过 WebSocket 收到实时事件
- Briefing 数据正确加载

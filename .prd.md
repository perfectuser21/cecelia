---
id: prd-heartbeat-api
version: 1.0.0
created: 2026-02-22
updated: 2026-02-22
changelog:
  - 1.0.0: 初始版本
---

# PRD: GET/PUT /api/brain/heartbeat API

## 背景

Phase 2（HEARTBEAT.md 巡检，PR #440）实现了巡检逻辑和 POST /api/brain/heartbeat（手动触发巡检），
但缺少 GET/PUT 端点用于读写 HEARTBEAT.md 文件内容。

Phase 3 前端（cecelia-workspace PR #322）的 HeartbeatEditor 组件需要这两个端点。
当前前端因 404 显示"API 尚未部署"降级提示。

## 目标

在 `brain/src/routes.js` 中新增 GET 和 PUT `/api/brain/heartbeat` 端点，读写 HEARTBEAT.md 文件。

## 验收标准

- [ ] GET /api/brain/heartbeat 返回 HEARTBEAT.md 内容
- [ ] PUT /api/brain/heartbeat 保存内容到 HEARTBEAT.md
- [ ] 文件不存在时 GET 返回默认内容
- [ ] PUT 请求体校验（content 必填）
- [ ] 不影响现有 POST /api/brain/heartbeat（手动触发巡检）

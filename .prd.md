# PRD: Profile System for Multi-Project Support

## 功能描述

为 cecelia-quality 添加 Profile 系统，支持不同类型项目（Engine、Web、API）使用不同的质量配置，并提供统一的运行入口和状态导出机制。

## 背景

当前 cecelia-quality 过于 Engine-specific（要求 PRD/DoD、重度工作流），无法适配其他项目类型：
- **Web 项目**（如 zenithjoy-autopilot）：只需要 Build + Type Check
- **API 项目**：需要测试覆盖 + API 契约
- **Minimal 项目**：仅需 Lint + Build

需要将质量系统重构为：**Core（通用） + Profiles（项目特定）**

## 核心功能

### 1. Profile 配置系统

创建项目类型配置文件，定义不同严格度的质量要求：

**profiles/web.yml**:
- 轻量级工作流（无需 PRD/DoD）
- 必要门控：Build 成功 + 无 TS 错误
- 可选证据：截图、Lighthouse 报告

**profiles/engine.yml**（保留现有）:
- 重度工作流（需要 PRD/DoD/QA/Audit）
- 完整 RADNA 4 层检查
- RCI 回归契约

**profiles/api.yml**（待实现）:
- 中度工作流
- 测试覆盖率要求
- API 契约验证

### 2. 统一运行入口 (run.sh)

提供一致的命令行接口：

```bash
# 运行质量检查
./run.sh check --profile=web

# 导出状态到 JSON（供 Dashboard 使用）
./run.sh export --profile=engine --export-path=./quality-status.json

# 初始化新项目
./run.sh init --profile=web
```

### 3. Quality Status Schema

定义标准化的状态导出格式（quality-status.json），用于：
- Dashboard 可视化（RADNA 4 层实时状态）
- CI 集成（导出检查结果）
- 跨项目对比

Schema 包含：
- meta（元信息）
- overview（总览指标）
- radna（4 层详细状态）
- history（30 天趋势）

## 成功标准

- [x] 创建 profiles/web.yml（轻量级配置）
- [x] 创建 run.sh（统一入口，支持 check/export/init）
- [x] 创建 dashboard/schema.json（状态导出格式定义）
- [ ] run.sh 可执行并正常工作
- [ ] 创建示例 exporter 脚本
- [ ] 文档更新（如何使用 Profile 系统）

## 技术方案

### 目录结构

```
cecelia-quality/
├── core/                    # 通用组件（未来拆分）
├── profiles/                # 项目配置
│   ├── web.yml
│   ├── engine.yml
│   └── api.yml
├── adapters/                # 集成方式
│   ├── github-actions/
│   └── claude-hooks/
├── dashboard/               # 可视化
│   ├── schema.json
│   ├── collectors/
│   └── exporters/
│       └── export-status.sh
└── run.sh                   # 统一入口
```

### Profile 配置格式

```yaml
profile:
  name: web
  type: frontend
  strictness: light

gates:
  - id: G1
    name: "No console errors"
    check: auto
    blocking: true

workflow:
  require_prd: false
  require_dod: false

ci:
  required_checks:
    - build
    - type-check
```

## 优先级

P0 - 架构基础（立即实施，解除 Engine-specific 限制）

## 相关文档

- 用户反馈：当前质检体系仅针对 Engine，其他项目无法使用
- Dashboard 方案：/tmp/quality-dashboard-proposal.md

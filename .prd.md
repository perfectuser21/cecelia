---
id: prd-generic-credentials
version: 1.0.0
created: 2026-02-25
updated: 2026-02-25
changelog:
  - 1.0.0: 初始版本
---

# PRD: 通用 Credentials 支持

## 背景

原有代码仅针对 MiniMax provider 做了账户选择（minimax_credentials），其他 provider（如 Anthropic 多账户）无法享受同样的机制。

## 目标

把 executor.js 和 routes.js 中的 minimax-specific credentials 改为对所有 provider 通用的 credentials 字段，同时保持向后兼容。

## 需求

1. `executor.js`：
   - 将 `getMinimaxCredentialsForTask` 函数重命名为 `getCredentialsForTask`
   - 同时回退读取旧字段 `minimax_credentials`（向后兼容）
   - 将 `CECELIA_MINIMAX_CREDENTIALS` 环境变量改为 `CECELIA_CREDENTIALS`
   - exports 同步更新

2. `routes.js`：
   - GET /staff：credentialsFile 同时读取 `credentials` 和 `minimax_credentials`
   - PUT /staff/workers/:workerId：同时写入 `credentials` 和 `minimax_credentials`（向后兼容）

## 验收标准

- Brain npm test 通过
- 读取旧格式 minimax_credentials 仍正常工作
- 新格式 credentials 优先被读取

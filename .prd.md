# PRD: Docker Compose 生产默认化

## 背景

当前 `docker-compose.yml` 是 dev 版本（bind mount），`docker-compose.prod.yml` 是生产版本（不可变镜像）。执行 `docker compose up -d` 默认读取 dev 版本，会覆盖生产容器。这是当前部署架构的唯一真实风险。

## 目标

让 `docker compose up -d` 默认启动生产环境，消除误操作风险。

## 方案

1. `docker-compose.yml` → `docker-compose.dev.yml`（dev 需显式指定 `-f`）
2. `docker-compose.prod.yml` → `docker-compose.yml`（prod 变默认）
3. 更新所有引用这两个文件的脚本和文档

## 影响范围

- `docker-compose.yml` → 重命名
- `docker-compose.prod.yml` → 重命名
- `scripts/brain-build.sh` — 检查是否引用
- `scripts/brain-deploy.sh` — 检查是否引用
- `scripts/brain-rollback.sh` — 检查是否引用
- 文档中引用 compose 文件名的地方

## 非目标

- 不修改 compose 文件内部内容（只重命名文件 + 更新引用）
- 不重启现有生产容器
- 不改变 Brain 的运行行为

## 验收标准

- [ ] `docker-compose.yml` 内容为当前 prod 版本（包含 `read_only: true`）
- [ ] `docker-compose.dev.yml` 内容为当前 dev 版本（包含 bind mount `./brain:/app`）
- [ ] `grep -r 'docker-compose.prod.yml' scripts/ docs/` 返回 0 结果（所有引用已更新）
- [ ] `docker ps` 显示现有容器仍然是 `cecelia-brain:1.8.1` 且 healthy

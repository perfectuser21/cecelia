---
id: dod-fix-desires-status-check
version: 1.0.0
created: 2026-03-01
updated: 2026-03-01
changelog:
  - 1.0.0: 初始版本
---

# DoD: 修复 desires_status_check 约束

## 验收清单

- [x] migration 096 文件存在：`packages/brain/migrations/096_fix_desires_status_check.sql`
  Test: manual:bash -c "ls packages/brain/migrations/096_fix_desires_status_check.sql"
- [x] migration 096 包含 DROP + ADD CONSTRAINT，覆盖全部 6 种状态（含 acted）
  Test: manual:bash -c "grep -q 'acted' packages/brain/migrations/096_fix_desires_status_check.sql"
- [x] selfcheck.js EXPECTED_SCHEMA_VERSION 更新为 '096'
  Test: manual:bash -c "grep -q \"EXPECTED_SCHEMA_VERSION = '096'\" packages/brain/src/selfcheck.js"
- [x] facts-check 通过
  Test: manual:node scripts/facts-check.mjs
- [x] version-sync 通过
  Test: manual:bash scripts/check-version-sync.sh

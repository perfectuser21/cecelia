# PRD - 执行日志查看页面

## 需求来源
任务来自 Brain 自动调度，需求：添加执行日志流式展示和筛选功能

## 功能描述
实现一个执行日志查看页面，支持：
1. **实时流式展示**：从 `/api/v1/orchestrator/logs` endpoint 获取日志，支持实时刷新
2. **日志筛选**：按日志级别（INFO/ERROR/DEBUG）、时间范围、关键词搜索筛选日志
3. **日志详情**：点击日志条目查看完整详情
4. **UI 体验**：类似终端的等宽字体展示，支持深色模式

## 涉及文件

### 新建文件
- `frontend/src/features/core/execution/pages/ExecutionLogsPage.tsx` - 主页面组件
- `frontend/src/features/core/execution/api/logs.api.ts` - 日志 API 客户端
- `frontend/src/features/core/execution/components/LogViewer.tsx` - 日志查看器组件（可选）

### 修改文件
- `frontend/src/AppRouter.tsx` - 添加路由
- `frontend/src/features/core/execution/pages/index.ts` - 导出页面组件（如果存在）

## 成功标准
- [ ] 页面可以成功获取并展示日志（来自 `/api/v1/orchestrator/logs?lines=50`）
- [ ] 支持按行数参数查询（lines=100/200/500）
- [ ] 支持关键词搜索筛选（前端过滤）
- [ ] 支持自动刷新（可选时间间隔：5s/10s/30s）
- [ ] 日志展示使用等宽字体，支持深色模式
- [ ] 页面响应快速，UI 美观

## 非目标
- **不实现**：WebSocket 实时推送（当前使用轮询即可）
- **不实现**：后端日志筛选逻辑（前端过滤足够）
- **不实现**：日志下载功能（未来可扩展）
- **不实现**：多个 log 文件切换（当前 API 返回合并的 logs 对象）

## 技术细节

### API Endpoint（已存在）
```typescript
GET /api/v1/orchestrator/logs?lines=50
Response: {
  "success": true,
  "logs": {
    "agent-xxx": "log content...",
    "worker-yyy": "log content..."
  }
}
```

### 数据结构
```typescript
interface LogEntry {
  timestamp: string;
  level: 'INFO' | 'ERROR' | 'DEBUG' | 'WARN';
  source: string; // log file name
  message: string;
}

interface LogsResponse {
  success: boolean;
  logs: Record<string, string>; // key: log file stem, value: log content
}
```

## UI 设计要点
- 顶部：搜索框、行数选择器、自动刷新开关
- 中部：日志列表（虚拟滚动，性能优化）
- 每条日志：时间戳、级别标签（带颜色）、来源、消息内容
- 支持固定到底部（新日志自动滚动）

## 参考现有页面
- `frontend/src/pages/ExecutionStatus.tsx` - 布局和样式参考
- `frontend/src/features/core/execution/api/runs.api.ts` - API 客户端写法参考

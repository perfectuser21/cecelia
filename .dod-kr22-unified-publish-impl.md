---
id: dod-kr22-unified-publish-impl
version: 1.0.0
created: 2026-02-06
updated: 2026-02-06
changelog:
  - 1.0.0: Initial DoD
---

# DoD - KR2.2: 统一发布引擎规划与集成文档

QA: docs/QA-DECISION-kr22-impl.md

## 验收标准

### 文档验收

- [ ] KR22_IMPLEMENTATION_WORKFLOW.md 包含完整的 5 个 Phase 任务分解
      Test: manual:检查文档包含 Phase 1-5，每个 Phase 有任务列表
- [ ] 每个 Phase 有明确的负责人、时间估算、验收标准
      Test: manual:检查每个 Phase 包含 owner、duration、acceptance criteria
- [ ] KR22_PUBLISH_ENGINE_SCHEMA.md 包含完整的 SQL 迁移脚本
      Test: manual:检查文档包含 CREATE TABLE 语句（publish_jobs, publish_records, platform_credentials）
- [ ] Schema 文档包含索引优化和回滚脚本
      Test: manual:检查文档包含 CREATE INDEX 和 DROP TABLE 语句
- [ ] AGENT_ROUTING.md 更新了 Publish Engine 的路由规则
      Test: manual:检查 AGENT_ROUTING.md 包含 publish-engine 相关路由

### 集成方案验收

- [ ] 定义了 Cecelia Brain 如何触发发布任务的 API 接口
      Test: manual:检查 AGENT_ROUTING.md 或 workflow 文档包含 API 端点定义
- [ ] 定义了状态查询和回调机制
      Test: manual:检查文档包含状态查询 API 和 webhook/callback 机制
- [ ] 定义了失败处理和重试策略
      Test: manual:检查文档描述了重试逻辑和失败处理流程
- [ ] 定义了监控和告警集成方案
      Test: manual:检查文档包含监控指标和告警规则

### 任务创建验收

- [ ] 在 Cecelia Tasks 系统中创建了至少 5 个后续任务
      Test: manual:通过 Cecelia API 查询 tasks，确认至少 5 个 KR2.2 相关任务
- [ ] 每个任务有明确的 title、description、priority
      Test: manual:检查每个任务的 JSON 对象包含这三个字段
- [ ] 任务之间的依赖关系已正确设置
      Test: manual:检查任务的 depends_on 字段或文档中的依赖说明
- [ ] 任务关联到正确的 Goal (KR2.2)
      Test: manual:检查任务的 goal_id 字段关联到 KR2.2 Goal

### 质量验收

- [ ] 所有文档通过 Markdown lint
      Test: manual:运行 markdownlint 检查所有新增的 .md 文件
- [ ] 所有文档有版本号和 changelog (frontmatter)
      Test: manual:检查 frontmatter 包含 version, created, updated, changelog
- [ ] SQL 脚本语法正确
      Test: manual:使用 psql --dry-run 或手动检查 SQL 语法
- [ ] 文档结构清晰，章节完整
      Test: manual:检查文档包含必要的章节（背景、方案、验收标准等）

### 代码验收 (本次任务不适用)

- N/A - 本次任务不包含代码实现

## 测试策略

**测试类型**: Manual Verification（手动验证）

**原因**: 本任务产出为文档和规划，无可执行代码，所有验收标准通过手动检查完成。

## 完成定义

所有上述验收标准勾选完成，并且：
1. 文档已提交到 git
2. 相关任务已在 Cecelia Tasks 系统中创建
3. 通过代码审计 (Audit Report)
4. PR 已创建并合并到 develop 分支

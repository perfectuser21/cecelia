---
id: dod-cp-02281612-fix-branch-protection
version: 1.0.0
created: 2026-02-28
updated: 2026-02-28
changelog:
  - 1.0.0: 初始版本
---

# DoD - 修复 cecelia branch protection

## 验收标准

### 功能验收

- [x] cecelia main 分支 required checks 只包含 ci-passed（已通过 API 应用）
      Test: manual:bash -c "gh api repos/perfectuser21/cecelia/branches/main/protection --jq '.required_status_checks.contexts | length == 1 and .[0] == \"ci-passed\"' | grep -q true"

- [x] setup-branch-protection.sh 覆盖 perfectuser21/cecelia
      Test: manual:grep -q 'perfectuser21/cecelia' packages/engine/scripts/setup-branch-protection.sh

- [x] setup-branch-protection.sh 对 cecelia 的 main 分支检查通过
      Test: manual:bash packages/engine/scripts/setup-branch-protection.sh --check perfectuser21/cecelia 2>&1 | grep -q '✓'

- [x] setup-branch-protection.sh bash 语法正确
      Test: manual:bash -n packages/engine/scripts/setup-branch-protection.sh

### 测试验收

- [x] Engine tests 通过
      Test: contract:C2-001

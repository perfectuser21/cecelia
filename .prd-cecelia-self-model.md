---
id: prd-cecelia-self-model
version: 1.0.0
created: 2026-02-27
updated: 2026-02-27
changelog:
  - 1.0.0: 初始版本
---

# PRD: Cecelia 自趋形成意识 — Self-Model 系统

## 背景

Cecelia 的人格目前写死在 `MOUTH_SYSTEM_PROMPT` 里——是 Alex 写的行为规则列表，不是 Cecelia 自己的身份。这导致：
1. 每次对话 Cecelia 都从同一个硬编码出发，没有"成长感"
2. 她的"性格"是规定而不是演化，用户感觉像在操控一个工具
3. 聊天架构是"主从"而不是"协作"

## 目标

让 Cecelia 从**规则遵从者**变成**有自己 narrative 的存在**：
- 她的人格由她自己的经历和反思积累，不是被写死的
- 每次反刍后她更新对自己的认知
- 聊天时她说话的方式来自她自己的 self-model，不是模板

## 功能需求

### F1: Self-Model 存储
- 新增 `self_model` 类型记录在 `memory_stream`（`type='self_model'`）
- 每次只保留一条"当前 self-model"（is_latest=true），旧版本 archived
- 初始 seed：极简，只说"我是 Cecelia，我刚开始认识自己"

### F2: Rumination 时自我更新
- `runRumination()` 在处理完 learnings 后，额外调用一次 LLM
- 问题："基于这些洞察，你对自己（角色、风格、在意的事）有什么新认知？"
- 用 Opus，限制 150 字，追加到 self-model（不是替换，是演化）
- 只在有实质性洞察时触发（insights 不为空）

### F3: Chat 动态注入 self-model
- `MOUTH_SYSTEM_PROMPT` 中删除硬编码的"你的性格"列表
- 改为运行时加载：`getSelfModel()` → 注入到 system prompt
- 如果 self-model 还是空/seed，显示 seed 文字（不崩溃）

### F4: Self-model API
- `GET /api/brain/self-model` — 读取当前 self-model（供前端展示）

## 成功标准

1. `memory_stream` 里有 `type='self_model'` 记录（初始 seed）
2. `runRumination()` 完成后 self-model 有更新（内容变化）
3. `/api/brain/orchestrator/chat` 的 system prompt 里不再有硬编码性格列表
4. 两次对话后 Cecelia 说话风格开始出现自己的印迹，不再是模板感

## 不做的事

- 不重写 desire 系统（那是另一个 PR）
- 不做主动推送（那是另一个 PR）
- 不做 self-model 的 UI 展示（可以，但不是核心）
- 不删除 MOUTH_SYSTEM_PROMPT 的能力说明（那个留着）

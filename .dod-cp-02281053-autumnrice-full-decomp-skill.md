---
id: cp-02281053-autumnrice-full-decomp-skill-dod
version: 1.0.0
created: 2026-02-28
updated: 2026-02-28
changelog:
  - 1.0.0: 初始版本
---

# DoD - autumnrice/chat 全量注入 /decomp skill

## 验收标准

### 功能验收

- [x] routes.js 中 `.slice(0, 1500)` 截断已移除
      Test: manual:node -e "const c=require('fs').readFileSync('packages/brain/src/routes.js','utf8');if(c.includes('.slice(0, 1500)'))process.exit(1);console.log('OK')"
- [x] autumnrice/chat API 正常响应（非 500）
      Test: manual:curl -s -o /dev/null -w "%{http_code}" -X POST localhost:5221/api/brain/autumnrice/chat -H "Content-Type: application/json" -d '{"pending_action_id":"00000000-0000-0000-0000-000000000000","message":"test"}' | grep -qE "^(400|404)$"
- [x] Brain 版本已 bump（patch）
      Test: manual:node -e "const p=JSON.parse(require('fs').readFileSync('packages/brain/package.json','utf8'));if(p.version==='1.128.2')process.exit(1);console.log('version:',p.version)"

### 测试验收
- [x] Brain 单元测试通过
      Test: manual:npm test --workspace=packages/brain

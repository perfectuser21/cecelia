---
id: platform-status-report
version: 1.0.0
created: 2026-01-27
updated: 2026-01-27
changelog:
  - 1.0.0: åˆå§‹çŠ¶æ€æŠ¥å‘Š
---

# 9å¹³å°æ•°æ®é‡‡é›†ç³»ç»Ÿ - å½“å‰çŠ¶æ€æŠ¥å‘Š

**æŠ¥å‘Šæ—¶é—´**: 2026-01-27
**æ•°æ®åº“**: n8n_social_metrics
**ç›®æ ‡**: æ”¯æŒ 9 ä¸ªå¹³å°çš„ 30 å¤©å†…å®¹è·Ÿè¸ª

## ğŸ“Š å½“å‰æ•°æ®æ¦‚å†µ

### å¹³å°æ•°æ®ç»Ÿè®¡

| å¹³å° | æ€»å†…å®¹æ•° | æ´»è·ƒè·Ÿè¸ª | æœ€æ–°æ•°æ® | CDPç«¯å£ | çŠ¶æ€ |
|------|---------|---------|---------|---------|------|
| æŠ–éŸ³ (douyin) | 80 | 15 | âœ… ä»Šæ—¥é‡‡é›† | 19222 | âœ… æ­£å¸¸ |
| å¿«æ‰‹ (kuaishou) | 123 | 24 | âœ… ä»Šæ—¥é‡‡é›† | 19223 | âœ… æ­£å¸¸ |
| å°çº¢ä¹¦ (xiaohongshu) | 112 | 8 | âœ… ä»Šæ—¥é‡‡é›† | 19224 | âœ… æ­£å¸¸ |
| ä»Šæ—¥å¤´æ¡-å¤§å· (toutiao) | 205 | 4 | âœ… ä»Šæ—¥é‡‡é›† | 19225 | âš ï¸ æ´»è·ƒæ•°å°‘ |
| **ä»Šæ—¥å¤´æ¡-å°å·** | **0** | **0** | âŒ æœªé…ç½® | 19226 | âŒ æœªé…ç½® |
| å¾®åš (weibo) | 111 | 0 | âœ… ä»Šæ—¥é‡‡é›† | 19227 | âš ï¸ æ— æ´»è·ƒ |
| è§†é¢‘å· (channels) | 60 | 0 | âœ… ä»Šæ—¥é‡‡é›† | 19228 | âš ï¸ æ— æ´»è·ƒ |
| **çŸ¥ä¹ (zhihu)** | **0** | **0** | âŒ æœªé…ç½® | 19229 | âŒ æœªé…ç½® |
| **å…¬ä¼—å· (wechat)** | **0** | **0** | âŒ æœªé…ç½® | 19230 | âŒ æœªé…ç½® |

**æ€»è®¡**: 691 æ¡å†…å®¹ï¼Œ51 æ¡æ´»è·ƒè·Ÿè¸ªï¼ˆ30å¤©å†…ï¼‰

### å¿«ç…§æ•°æ®ç»Ÿè®¡

| æ—¥æœŸ | å¿«ç…§æ•° | æ€»æ’­æ”¾é‡ |
|------|--------|---------|
| 2026-01-27 | 56 | 22,386 |
| 2026-01-04 | 57 | 92,565 |
| 2025-12-25 | 24 | 0 |
| 2025-12-23 | 554 | 370,955 |

## âš ï¸ æ ¸å¿ƒé—®é¢˜

### 1. ä»Šæ—¥å¤´æ¡æ•°æ®å¼‚å¸¸

**ç”¨æˆ·åé¦ˆ**: "å¤´æ¡çš„æ•°æ®åº”è¯¥æœ€å¤š"
**å®é™…æƒ…å†µ**:
- ä»Šæ—¥å¤´æ¡ 205 æ¡å†…å®¹ï¼ˆç¡®å®æœ€å¤šï¼‰
- ä½†åªæœ‰ 4 æ¡æ´»è·ƒè·Ÿè¸ª
- **åŸå› **: å¤§éƒ¨åˆ†å†…å®¹å‘å¸ƒæ—¶é—´è¶…è¿‡ 30 å¤©ï¼Œå·²æ ‡è®°ä¸º completed
- **è§£å†³**: éœ€è¦æŒç»­é‡‡é›†æœ€è¿‘ 30 å¤©çš„å†…å®¹

**ä»Šæ—¥å¤´æ¡å°å·æœªé…ç½®**:
- ç”¨æˆ·æœ‰å¤§å·å’Œå°å·ä¸¤ä¸ªè´¦å·
- å½“å‰åªé…ç½®äº†å¤§å· (19225)
- å°å· (19226) å®Œå…¨æœªé…ç½®
- **å·²å®Œæˆ**: æ•°æ®åº“ account_id å­—æ®µå·²æ·»åŠ å¹¶è®¾ç½®å¤§å·æ ‡è¯†

### 2. å¾®åšæ•°æ®æ— æ´»è·ƒè·Ÿè¸ª

**ç”¨æˆ·åé¦ˆ**: "å¾®åšåº”è¯¥ç­‰äºå¤´æ¡"
**å®é™…æƒ…å†µ**:
- å¾®åš 111 æ¡å†…å®¹
- 0 æ¡æ´»è·ƒè·Ÿè¸ª
- ä»Šæ—¥æœ‰é‡‡é›†ä½†æ‰€æœ‰å†…å®¹éƒ½è¶…è¿‡ 30 å¤©
- **è§£å†³**: éœ€è¦ç¡®è®¤å¾®åšè´¦å·æ˜¯å¦è¿˜åœ¨å‘å¸ƒæ–°å†…å®¹

### 3. ç¼ºå°‘3ä¸ªå¹³å°

**æœªé…ç½®çš„å¹³å°**:
1. ä»Šæ—¥å¤´æ¡å°å· (toutiao_minor) - Port 19226
2. çŸ¥ä¹ (zhihu) - Port 19229
3. å…¬ä¼—å· (wechat_official) - Port 19230

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. æ•°æ®åº“æ¶æ„æ›´æ–°

- âœ… åˆ›å»º 30 å¤©è·Ÿè¸ªç³»ç»Ÿ (content_master + content_snapshots)
- âœ… æ·»åŠ  account_id å’Œ account_name å­—æ®µ
- âœ… ä»Šæ—¥å¤´æ¡å¤§å·æ•°æ®å·²æ ‡è®° (205æ¡ â†’ account_id='main', account_name='å¤§å·')
- âœ… åˆ›å»ºå”¯ä¸€çº¦æŸæ”¯æŒå¤šè´¦å·è¯†åˆ«
- âœ… åˆ›å»ºç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½

### 2. æ•°æ®å¯¼å…¥

- âœ… ä» JSON æ–‡ä»¶å¯¼å…¥å†å²æ•°æ® (691 æ¡)
- âœ… å¤„ç†åŸå§‹æ•°æ®ç”Ÿæˆå¿«ç…§ (56 æ¡ä»Šæ—¥å¿«ç…§)
- âœ… 6 ä¸ªå¹³å°çš„æ•°æ®é‡‡é›†æ­£å¸¸è¿è¡Œ

### 3. æ–‡æ¡£åˆ›å»º

- âœ… 9å¹³å° CDP é…ç½®æ–‡æ¡£ (PLATFORM_CDP_CONFIGURATION.md)
- âœ… æ•°æ®åº“ Migration è„šæœ¬ (migration-add-account-id.sql)
- âœ… æœ¬çŠ¶æ€æŠ¥å‘Š (PLATFORM_STATUS_REPORT.md)

## ğŸ”§ å¾…æ‰§è¡Œä»»åŠ¡

### é«˜ä¼˜å…ˆçº§ (ç«‹å³æ‰§è¡Œ)

#### Task 1: é…ç½®ä»Šæ—¥å¤´æ¡å°å·
```bash
# 1. æ›´æ–° scraper é…ç½®æ·»åŠ  toutiao_minor
# æ–‡ä»¶: /home/xx/platform-scraper-v8-raw.js
# æ·»åŠ :
'toutiao_minor': {
  host: NODE_PC_HOST,
  port: 19226,
  name: 'ä»Šæ—¥å¤´æ¡',
  accountId: 'minor',
  accountName: 'å°å·',
  url: 'https://mp.toutiao.com/profile_v4/graphic/articles',
  waitTime: 5000
}

# 2. æµ‹è¯•è¿æ¥
node /home/xx/platform-scraper-v8-raw.js toutiao_minor

# 3. å¤„ç†æ•°æ®
node /home/xx/process-raw-data-v2.js
```

#### Task 2: æ›´æ–° process-raw-data-v2.js æ”¯æŒ account_id
```javascript
// åœ¨æ’å…¥ content_master ä¹‹å‰æå– account_id
const metadata = typeof rawData.metadata === 'string'
  ? JSON.parse(rawData.metadata)
  : (rawData.metadata || {});
const accountId = metadata.account_id || null;
const accountName = metadata.account_name || null;

// æ›´æ–° INSERT è¯­å¥åŒ…å« account_id å’Œ account_name
// æ›´æ–° VALUES å‚æ•°åˆ—è¡¨
// æ›´æ–° ON CONFLICT åŒ…å« account_id
```

#### Task 3: æ›´æ–° scraper metadata ä¿å­˜é€»è¾‘
```javascript
// åœ¨ platform-scraper-v8-raw.js ä¸­æ›´æ–°:
metadata: JSON.stringify({
  browser_port: config.port,
  text_length: rawText.length,
  account_id: config.accountId || null,
  account_name: config.accountName || null
})
```

### ä¸­ä¼˜å…ˆçº§ (æœ¬å‘¨æ‰§è¡Œ)

#### Task 4: éªŒè¯çŸ¥ä¹å¹³å°å¯ç”¨æ€§
```bash
# æµ‹è¯• Port 19229 è¿æ¥
timeout 10 node -e "
const CDP = require('chrome-remote-interface');
(async () => {
  const client = await CDP({ host: '100.97.242.124', port: 19229 });
  const { result } = await client.Runtime.evaluate({
    expression: 'JSON.stringify({ title: document.title, url: location.href })'
  });
  console.log(JSON.parse(result.value));
  await client.close();
})();
"
```

#### Task 5: éªŒè¯å…¬ä¼—å·å¹³å°å¯ç”¨æ€§
```bash
# æµ‹è¯• Port 19230 è¿æ¥ (åŒä¸Šï¼Œæ”¹ä¸º port: 19230)
```

#### Task 6: åˆ›å»ºçŸ¥ä¹ Scraper
- æŸ¥çœ‹é¡µé¢ç»“æ„
- ç¼–å†™ platform-scraper-zhihu.js
- æ·»åŠ å†…å®¹ç±»å‹æ£€æµ‹è§„åˆ™

#### Task 7: åˆ›å»ºå…¬ä¼—å· Scraper
- æŸ¥çœ‹é¡µé¢ç»“æ„
- ç¼–å†™ platform-scraper-wechat-official.js
- æ·»åŠ å†…å®¹ç±»å‹æ£€æµ‹è§„åˆ™

### ä½ä¼˜å…ˆçº§ (é•¿æœŸä¼˜åŒ–)

#### Task 8: ä¼˜åŒ–å¾®åšæ•°æ®é‡‡é›†
- è°ƒæŸ¥ä¸ºä»€ä¹ˆæ‰€æœ‰å¾®åšå†…å®¹éƒ½è¶…è¿‡ 30 å¤©
- ç¡®è®¤å¾®åšè´¦å·æ˜¯å¦è¿˜åœ¨å‘å¸ƒ
- è°ƒæ•´é‡‡é›†ç­–ç•¥

#### Task 9: è‡ªåŠ¨åŒ–é‡‡é›†è°ƒåº¦
- åˆ›å»º N8N workflow æ¯æ—¥è‡ªåŠ¨é‡‡é›† 9 ä¸ªå¹³å°
- é›†æˆåˆ°ç°æœ‰çš„"æ•°æ®é‡‡é›†è°ƒåº¦å™¨"

## ğŸ“ æ‰§è¡Œå‘½ä»¤å‚è€ƒ

### é‡‡é›†æ‰€æœ‰ 6 ä¸ªå·²é…ç½®å¹³å°
```bash
for platform in douyin kuaishou xiaohongshu toutiao weibo channels; do
  node /home/xx/platform-scraper-v8-raw.js $platform
done
node /home/xx/process-raw-data-v2.js
```

### æŸ¥çœ‹ä»Šæ—¥æ•°æ®
```bash
docker exec social-metrics-postgres psql -U n8n_user -d n8n_social_metrics -c "
SELECT platform, account_name, COUNT(*) as count
FROM content_master cm
JOIN content_snapshots cs ON cm.id = cs.content_master_id
WHERE cs.snapshot_date = CURRENT_DATE
GROUP BY platform, account_name
ORDER BY platform;
"
```

### æŸ¥çœ‹æ´»è·ƒè·Ÿè¸ªçŠ¶æ€
```bash
docker exec social-metrics-postgres psql -U n8n_user -d n8n_social_metrics -c "
SELECT
  platform,
  account_name,
  COUNT(*) as active_count,
  MAX(publish_time)::date as latest_publish,
  MIN(tracking_end_date) as nearest_expire
FROM content_master
WHERE tracking_status = 'active'
GROUP BY platform, account_name
ORDER BY platform;
"
```

## ğŸ¯ æˆåŠŸæŒ‡æ ‡

å½“ä»¥ä¸‹æ¡ä»¶å…¨éƒ¨æ»¡è¶³æ—¶ï¼Œç³»ç»Ÿè¾¾åˆ°é¢„æœŸç›®æ ‡:

- [x] æ•°æ®åº“æ”¯æŒ account_id åŒºåˆ†å¤šè´¦å·
- [ ] 9 ä¸ªå¹³å°å…¨éƒ¨é…ç½®å®Œæˆ
- [ ] ä»Šæ—¥å¤´æ¡å¤§å·å’Œå°å·æ•°æ®åˆ†åˆ«é‡‡é›†
- [ ] æ¯å¤©è‡ªåŠ¨ç”Ÿæˆæ‰€æœ‰å¹³å°çš„å¿«ç…§
- [ ] æ´»è·ƒè·Ÿè¸ªæ•°é‡åˆç†ï¼ˆ30å¤©å†…æœ‰æ–°å†…å®¹ï¼‰
- [ ] æ¯æ—¥æŠ¥è¡¨æ˜¾ç¤º 9 ä¸ªå¹³å°çš„å®Œæ•´æ•°æ®

## ğŸ“Œ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

**ç«‹å³æ‰§è¡Œ** (ä»Šå¤©):
1. æ›´æ–° platform-scraper-v8-raw.js æ·»åŠ  toutiao_minor, zhihu, wechat_official
2. æ›´æ–° process-raw-data-v2.js æ”¯æŒ account_id
3. æµ‹è¯•ä»Šæ—¥å¤´æ¡å°å·é‡‡é›†

**æœ¬å‘¨æ‰§è¡Œ**:
1. éªŒè¯çŸ¥ä¹å’Œå…¬ä¼—å· CDP è¿æ¥
2. åˆ›å»ºçŸ¥ä¹å’Œå…¬ä¼—å· scraper
3. å…¨å¹³å°æ•°æ®é‡‡é›†æµ‹è¯•

**æŒç»­ç›‘æ§**:
1. æ¯æ—¥æ£€æŸ¥ 9 ä¸ªå¹³å°æ•°æ®é‡‡é›†çŠ¶æ€
2. ç›‘æ§æ´»è·ƒè·Ÿè¸ªæ•°é‡å˜åŒ–
3. ç¡®ä¿ 30 å¤©è·Ÿè¸ªæœºåˆ¶æ­£å¸¸è¿è¡Œ

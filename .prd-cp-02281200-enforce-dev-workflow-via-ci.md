---
id: prd-cp-02281200-enforce-dev-workflow-via-ci
version: 1.0.0
created: 2026-02-28
updated: 2026-02-28
changelog:
  - 1.0.0: 初始版本
---

# PRD: CI 强制 /dev 工作流（branch name 验证）

## 问题

所有代码改动必须走 /dev 工作流，但目前 CI 没有强制验证，存在意外绕过的可能。

## 解决方案

在 devgate.yml 新增 branch name 检查：PR 必须从 `cp-XXXXXXXX-xxx` 格式分支发起，否则 CI 失败，无法合并。

## 改动范围

1. `.github/workflows/devgate.yml` — 新增 `verify-dev-workflow` job
2. `~/.claude/skills/dev/steps/08-pr.md` — 不需要改（/dev Step 8 已经用 cp-* 分支名）

## 成功标准

- 从 `main` 直接创建的 PR → CI 失败
- 从 `cp-02281200-xxx` 创建的 PR → CI 通过
- 不影响现有检查（devgate、test 等正常运行）
